<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>weex打包安卓</title>
    <url>/2020/01/28/weex%E6%89%93%E5%8C%85%E5%AE%89%E5%8D%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2><span id="chang-yong-ji-qiao">常用技巧</span><a href="#chang-yong-ji-qiao" class="header-anchor">#</a></h2><a id="more"></a>

<pre><code>集成android实例：
https://github.com/xkli/WXSample.git



集成android实例：
https://github.com/wang8651971/Weex-Demo.git


配置跳转：
https://www.jianshu.com/p/572199f9b838



跳转封装：
https://www.jianshu.com/search?q=weex%20navigator&amp;page=1&amp;type=note


安卓跳转配置：
https://www.jianshu.com/p/5bc68432e7cb
https://www.jianshu.com/p/81a6fe7399e7

https://segmentfault.com/a/1190000012629351
https://www.jianshu.com/p/572199f9b838
https://blog.csdn.net/blog_lee/article/details/79820130


集成android配置：
https://www.cnblogs.com/fwling/p/6726066.html
https://blog.csdn.net/AndroidFlying007/article/details/78001862
https://www.jianshu.com/p/5034c6ed4722
https://blog.csdn.net/dfskhgalshgkajghljgh/article/details/52757849


严选app：
https://juejin.im/entry/59af918c5188251240635a96


创建附demo：
https://www.jianshu.com/p/d9487554de3c
https://www.jianshu.com/p/18fac5db8429

实战：
https://blog.csdn.net/dfskhgalshgkajghljgh/article/details/54731173
https://blog.csdn.net/dfskhgalshgkajghljgh/article/details/54732559
https://blog.csdn.net/oqqMiHu123/article/details/68925359


坑：
https://blog.csdn.net/Jupiterxx/article/details/80026909</code></pre>]]></content>
      <categories>
        <category>weex</category>
      </categories>
      <tags>
        <tag>weex</tag>
      </tags>
  </entry>
  <entry>
    <title>转换工具</title>
    <url>/2020/01/28/%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2><span id="js-css-jian-rong-chu-li">js，css兼容处理</span><a href="#js-css-jian-rong-chu-li" class="header-anchor">#</a></h2><pre><code>Autoprefixer css online
https://autoprefixer.github.io/
css 在线增加浏览器兼容性


https://babeljs.io/repl/
es6转es5

多端代码统一：
tora，uniapp</code></pre><a id="more"></a>    


<h2><span id="fu-wen-ben-bian-ji-qi">富文本编辑器</span><a href="#fu-wen-ben-bian-ji-qi" class="header-anchor">#</a></h2><pre><code>wangeditor </code></pre><h2><span id="cdn-zi-yuan-qian-zhui">CDN资源前缀</span><a href="#cdn-zi-yuan-qian-zhui" class="header-anchor">#</a></h2><pre><code>https://cdn.jsdelivr.net/

例如： https://cdn.jsdelivr.net/npm/pdfjs-dist@2.1.266/build/pdf.worker.js    </code></pre><h2><span id="chang-yong-wang-zhan">常用网站</span><a href="#chang-yong-wang-zhan" class="header-anchor">#</a></h2><pre><code>www.bootcss.com

nec.netease.com

常用火狐API网站
https://developer.mozilla.org/zh-CN/    </code></pre><h2><span id="chang-yong-bian-ji-qi">常用编辑器</span><a href="#chang-yong-bian-ji-qi" class="header-anchor">#</a></h2><p><code>点击下载</code>  <a href="https://github.com/blackKr/source/testingserver.exe">testingserver</a></p>
<pre><code>文本编辑器：
EmEditor   Notepad++

监听：
Fiddler4

testingserver.exe 这个软件放在任意目录，点击运行，就可以部署个静态的服务器    </code></pre><h2><span id="js-zi-fu-chuan-zhuan-fang-fa">js 字符串转方法</span><a href="#js-zi-fu-chuan-zhuan-fang-fa" class="header-anchor">#</a></h2><pre><code>1. 通过字符串 找方法:
var func=eval(functionName);
//创建函数对象，并调用
new func(参数);

2. 正则表达式：
http://deerchao.net/tutorials/regex/regex-1.htm</code></pre><h2><span id="babel-ru-men-jiao-cheng">Babel 入门教程__</span><a href="#babel-ru-men-jiao-cheng" class="header-anchor">#</a></h2><pre><code>来自： http://web.jobbole.cm/85115/

（说明：本文选自我的新书 《ES6 标准入门（第二版）》 的第一章 《ECMAScript 6简介》 ）

Babel 是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行。



这意味着，你可以现在就用ES6编写程序，而不用担心现有环境是否支持。下面是一个例子。

// 转码前
input.map(item =&gt; item + 1);

// 转码后
input.map(function (item) {
  return item + 1;
});
// 转码前
input.map(item =&gt; item + 1);

// 转码后
input.map(function (item) {
  return item + 1;
});
上面的原始代码用了箭头函数，这个特性还没有得到广泛支持，Babel将其转为普通函数，就能在现有的JavaScript环境执行了。

一、配置文件 .babelrc
Babel的配置文件是 .babelrc ，存放在项目的根目录下。使用Babel的第一步，就是配置这个文件。

该文件用来设置转码规则和插件，基本格式如下。

{
  &quot;presets&quot;: [],
  &quot;plugins&quot;: []
}
{
  &quot;presets&quot;: [],
  &quot;plugins&quot;: []
}
presets 字段设定转码规则，官方提供以下的规则集，你可以根据需要安装。

# ES2015转码规则
$ npm install --save-dev babel-preset-es2015

# react转码规则
$ npm install --save-dev babel-preset-react

# ES7不同阶段语法提案的转码规则（共有4个阶段），选装一个
$ npm install --save-dev babel-preset-stage-0
$ npm install --save-dev babel-preset-stage-1
$ npm install --save-dev babel-preset-stage-2
$ npm install --save-dev babel-preset-stage-3
# ES2015转码规则
$ npminstall --save-devbabel-preset-es2015

# react转码规则
$ npminstall --save-devbabel-preset-react

# ES7不同阶段语法提案的转码规则（共有4个阶段），选装一个
$ npminstall --save-devbabel-preset-stage-0
$ npminstall --save-devbabel-preset-stage-1
$ npminstall --save-devbabel-preset-stage-2
$ npminstall --save-devbabel-preset-stage-3
然后，将这些规则加入 .babelrc 。

{
    &quot;presets&quot;: [
      &quot;es2015&quot;,
      &quot;react&quot;,
      &quot;stage-2&quot;
    ],
    &quot;plugins&quot;: []
  }
  {
    &quot;presets&quot;: [
      &quot;es2015&quot;,
      &quot;react&quot;,
      &quot;stage-2&quot;
    ],
    &quot;plugins&quot;: []
  }
注意，以下所有Babel工具和模块的使用，都必须先写好 .babelrc 。

二、命令行转码 babel-cli
Babel提供 babel-cli 工具，用于命令行转码。

它的安装命令如下。

$ npm install --global babel-cli
$ npminstall --global babel-cli
基本用法如下。

# 转码结果输出到标准输出
$ babel example.js

# 转码结果写入一个文件
# --out-file 或 -o 参数指定输出文件
$ babel example.js --out-file compiled.js
# 或者
$ babel example.js -o compiled.js

# 整个目录转码
# --out-dir 或 -d 参数指定输出目录
$ babel src --out-dir lib
# 或者
$ babel src -d lib

# -s 参数生成source map文件
$ babel src -d lib -s
# 转码结果输出到标准输出
$ babelexample.js

# 转码结果写入一个文件
# --out-file 或 -o 参数指定输出文件
$ babelexample.js --out-filecompiled.js
# 或者
$ babelexample.js -o compiled.js

# 整个目录转码
# --out-dir 或 -d 参数指定输出目录
$ babelsrc --out-dirlib
# 或者
$ babelsrc -d lib

# -s 参数生成source map文件
$ babelsrc -d lib -s
上面代码是在全局环境下，进行Babel转码。这意味着，如果项目要运行，全局环境必须有Babel，也就是说项目产生了对环境的依赖。另一方面，这样做也无法支持不同项目使用不同版本的Babel。

一个解决办法是将 babel-cli 安装在项目之中。

# 安装
$ npm install --save-dev babel-cli
# 安装
$ npminstall --save-devbabel-cli
然后，改写 package.json 。

{
  // ...
  &quot;devDependencies&quot;: {
    &quot;babel-cli&quot;: &quot;^6.0.0&quot;
  },
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;babel src -d lib&quot;
  },
}
{
  // ...
  &quot;devDependencies&quot;: {
    &quot;babel-cli&quot;: &quot;^6.0.0&quot;
  },
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;babel src -d lib&quot;
  },
}
转码的时候，就执行下面的命令。

$ npm run build
$ npmrunbuild
三、babel-node
babel-cli 工具自带一个 babel-node 命令，提供一个支持ES6的REPL环境。它支持Node的REPL环境的所有功能，而且可以直接运行ES6代码。

它不用单独安装，而是随 babel-cli 一起安装。然后，执行 babel-node 就进入PEPL环境。

$ babel-node
&gt; (x =&gt; x * 2)(1)
2
$ babel-node
&gt; (x =&gt; x * 2)(1)
2
babel-node 命令可以直接运行ES6脚本。将上面的代码放入脚本文件 es6.js ，然后直接运行。

$ babel-node es6.js

2
$ babel-nodees6.js
2
babel-node 也可以安装在项目中。

$ npm install --save-dev babel-cli
$ npminstall --save-devbabel-cli
然后，改写 package.json 。

{
  &quot;scripts&quot;: {
    &quot;script-name&quot;: &quot;babel-node script.js&quot;
  }
}
{
  &quot;scripts&quot;: {
    &quot;script-name&quot;: &quot;babel-node script.js&quot;
  }
}
上面代码中，使用 babel-node 替代 node ，这样 script.js 本身就不用做任何转码处理。

四、babel-register
babel-register 模块改写 require 命令，为它加上一个钩子。此后，每当使用 require 加载 .js 、 .jsx 、 .es 和 .es6 后缀名的文件，就会先用Babel进行转码。

$ npm install --save-dev babel-register
$ npminstall --save-devbabel-register
使用时，必须首先加载 babel-register 。

require(&quot;babel-register&quot;);
require(&quot;./index.js&quot;);
require(&quot;babel-register&quot;);
require(&quot;./index.js&quot;);
然后，就不需要手动对 index.js 转码了。

需要注意的是， babel-register 只会对 require 命令加载的文件转码，而不会对当前文件转码。另外，由于它是实时转码，所以只适合在开发环境使用。

五、babel-core
如果某些代码需要调用Babel的API进行转码，就要使用 babel-core 模块。

安装命令如下。

$ npm install babel-core --save
$ npminstallbabel-core --save
然后，在项目中就可以调用 babel-core 。

var babel = require(&apos;babel-core&apos;);

// 字符串转码
babel.transform(&apos;code();&apos;, options);
// =&gt; { code, map, ast }

// 文件转码（异步）
babel.transformFile(&apos;filename.js&apos;, options, function(err, result) {
  result; // =&gt; { code, map, ast }
});

// 文件转码（同步）
babel.transformFileSync(&apos;filename.js&apos;, options);
// =&gt; { code, map, ast }

// Babel AST转码
babel.transformFromAst(ast, code, options);
// =&gt; { code, map, ast }
var babel = require(&apos;babel-core&apos;);

// 字符串转码
babel.transform(&apos;code();&apos;, options);
// =&gt; { code, map, ast }

// 文件转码（异步）
babel.transformFile(&apos;filename.js&apos;, options, function(err, result) {
  result; // =&gt; { code, map, ast }
});

// 文件转码（同步）
babel.transformFileSync(&apos;filename.js&apos;, options);
// =&gt; { code, map, ast }

// Babel AST转码
babel.transformFromAst(ast, code, options);
// =&gt; { code, map, ast }
配置对象 options ，可以参看官方文档 http://babeljs.io/docs/usage/options/ 。

下面是一个例子。

var es5Code = &apos;let x = n =&gt; n + 1&apos;;
var es6Code = require(&apos;babel-core&apos;)
  .transform(es5Code, {
    presets: [&apos;es2015&apos;]
  })
  .code;
// &apos;&quot;use strict&quot;;nnvar x = function x(n) {n  return n + 1;n};&apos;
var es5Code = &apos;let x = n =&gt; n + 1&apos;;
var es6Code = require(&apos;babel-core&apos;)
  .transform(es5Code, {
    presets: [&apos;es2015&apos;]
  })
  .code;
// &apos;&quot;use strict&quot;;nnvar x = function x(n) {n  return n + 1;n};&apos;
上面代码中， transform 方法的第一个参数是一个字符串，表示需要转换的ES5代码，第二个参数是转换的配置对象。

六、babel-polyfill
Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如 Object.assign ）都不会转码。

举例来说，ES6在 Array 对象上新增了 Array.from 方法。Babel就不会转码这个方法。如果想让这个方法运行，必须使用 babel-polyfill ，为当前环境提供一个垫片。

安装命令如下。

$ npm install --save babel-polyfill
$ npminstall --savebabel-polyfill
然后，在脚本头部，加入如下一行代码。

import &apos;babel-polyfill&apos;;
// 或者
require(&apos;babel-polyfill&apos;);
import &apos;babel-polyfill&apos;;
// 或者
require(&apos;babel-polyfill&apos;);
Babel默认不转码的API非常多，详细清单可以查看 babel-plugin-transform-runtime 模块的 definitions.js 文件。

七、浏览器环境
Babel也可以用于浏览器环境。但是，从Babel 6.0开始，不再直接提供浏览器版本，而是要用构建工具构建出来。如果你没有或不想使用构建工具，可以通过安装5.x版本的 babel-core 模块获取。

$ npm install babel-core&lt;a href=&quot;http://www.jobbole.com/members/5&quot;&gt;@5&lt;/a&gt;
$ npminstallbabel-core&lt;a href=&quot;http://www.jobbole.com/members/5&quot;&gt;@5&lt;/a&gt;
运行上面的命令以后，就可以在当前目录的 node_modules/babel-core/ 子目录里面，找到 babel 的浏览器版本 browser.js （未精简）和 browser.min.js （已精简）。

然后，将下面的代码插入网页。

JavaScript

&lt;script src=&quot;node_modules/babel-core/browser.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
// Your ES6 code
&lt;/script&gt;
&lt;scriptsrc=&quot;node_modules/babel-core/browser.js&quot;&gt;&lt;/script&gt;
&lt;scripttype=&quot;text/babel&quot;&gt;
// Your ES6 code
&lt;/script&gt;
&lt;/div&gt;
上面代码中， browser.js 是Babel提供的转换器脚本，可以在浏览器运行。用户的ES6脚本放在 script 标签之中，但是要注明 type=&quot;text/babel&quot; 。

另一种方法是使用 babel-standalone 模块提供的浏览器版本，将其插入网页。

JavaScript

&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.4.4/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/babel&quot;&gt;
// Your ES6 code
&lt;/script&gt;
&lt;scriptsrc=&quot;https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.4.4/babel.min.js&quot;&gt;&lt;/script&gt;
&lt;scripttype=&quot;text/babel&quot;&gt;
// Your ES6 code
&lt;/script&gt;
&lt;/div&gt;
注意，网页中实时将ES6代码转为ES5，对性能会有影响。生产环境需要加载已经转码完成的脚本。

下面是如何将代码打包成浏览器可以使用的脚本，以 Babel 配合 Browserify 为例。首先，安装 babelify 模块。

$ npm install --save-dev babelify babel-preset-es2015
$ npminstall --save-devbabelifybabel-preset-es2015
然后，再用命令行转换ES6脚本。

$  browserify script.js -o bundle.js 
  -t [ babelify --presets [ es2015 react ] ]
$  browserifyscript.js -o bundle.js 
  -t [ babelify --presets [ es2015react ] ]
上面代码将ES6脚本 script.js ，转为 bundle.js ，浏览器直接加载后者就可以了。

在 package.json 设置下面的代码，就不用每次命令行都输入参数了。

{
  &quot;browserify&quot;: {
    &quot;transform&quot;: [[&quot;babelify&quot;, { &quot;presets&quot;: [&quot;es2015&quot;] }]]
  }
}
{
  &quot;browserify&quot;: {
    &quot;transform&quot;: [[&quot;babelify&quot;, { &quot;presets&quot;: [&quot;es2015&quot;] }]]
  }
}
八、在线转换
Babel提供一个 REPL在线编译器 ，可以在线将ES6代码转为ES5代码。转换后的代码，可以直接作为ES5代码插入网页运行。

九、与其他工具的配合
许多工具需要Babel进行前置转码，这里举两个例子：ESLint和Mocha。

ESLint 用于静态检查代码的语法和风格，安装命令如下。

$ npm install --save-dev eslint babel-eslint
$ npminstall --save-deveslintbabel-eslint
然后，在项目根目录下，新建一个配置文件 .eslint ，在其中加入 parser 字段。

{
  &quot;parser&quot;: &quot;babel-eslint&quot;,
  &quot;rules&quot;: {
    ...
  }
}
{
  &quot;parser&quot;: &quot;babel-eslint&quot;,
  &quot;rules&quot;: {
    ...
  }
}
再在 package.json 之中，加入相应的 scripts 脚本。

{
    &quot;name&quot;: &quot;my-module&quot;,
    &quot;scripts&quot;: {
      &quot;lint&quot;: &quot;eslint my-files.js&quot;
    },
    &quot;devDependencies&quot;: {
      &quot;babel-eslint&quot;: &quot;...&quot;,
      &quot;eslint&quot;: &quot;...&quot;
    }
  }
  {
    &quot;name&quot;: &quot;my-module&quot;,
    &quot;scripts&quot;: {
      &quot;lint&quot;: &quot;eslint my-files.js&quot;
    },
    &quot;devDependencies&quot;: {
      &quot;babel-eslint&quot;: &quot;...&quot;,
      &quot;eslint&quot;: &quot;...&quot;
    }
  }
Mocha 则是一个测试框架，如果需要执行使用ES6语法的测试脚本，可以修改 package.json 的 scripts.test 。

&quot;scripts&quot;: {
  &quot;test&quot;: &quot;mocha --ui qunit --compilers js:babel-core/register&quot;
}
&quot;scripts&quot;: {
  &quot;test&quot;: &quot;mocha --ui qunit --compilers js:babel-core/register&quot;
}
上面命令中， --compilers 参数指定脚本的转码器，规定后缀名为 js 的文件，都需要使用 babel-core/register 先转码。

&lt;/div&gt;
深度开源</code></pre>]]></content>
      <categories>
        <category>转换工具</category>
      </categories>
      <tags>
        <tag>tool</tag>
      </tags>
  </entry>
  <entry>
    <title>krpano tour.xml</title>
    <url>/2020/01/28/krpano-tour-xml/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>点击下载</code>  <a href="https://github.com/blackKr/source/blob/master/krpano/tour.xml">tour.xml</a></p>
<a id="more"></a>

<h1><span id="you-jian-cai-dan"><em><strong>右键菜单</strong></em></span><a href="#you-jian-cai-dan" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 右键菜单 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">contextmenu</span> <span class="attr">fullscreen</span>=<span class="string">"true"</span> <span class="attr">versioninfo</span>=<span class="string">"false"</span> <span class="attr">enterfs</span>=<span class="string">"全屏查看"</span> <span class="attr">exitfs</span>=<span class="string">"退出全屏"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"kr"</span> <span class="attr">caption</span>=<span class="string">"KRPANO"</span> <span class="attr">showif</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"fs"</span> <span class="attr">caption</span>=<span class="string">"全屏查看"</span> <span class="attr">showif</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"cc"</span> <span class="attr">caption</span>=<span class="string">"更改控制模式"</span> <span class="attr">onclick</span>=<span class="string">"cm_changecontrolmode();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">separator</span>=<span class="string">"true"</span> <span class="attr">showif</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"nv"</span> <span class="attr">caption</span>=<span class="string">"正常视角"</span>  <span class="attr">onclick</span>=<span class="string">"cm_normal_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> <span class="attr">separator</span>=<span class="string">"true"</span>      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"fv"</span> <span class="attr">caption</span>=<span class="string">"鱼眼视角"</span> <span class="attr">onclick</span>=<span class="string">"cm_fisheye_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> <span class="attr">devices</span>=<span class="string">"flash|webgl"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"sv"</span> <span class="attr">caption</span>=<span class="string">"立体视角"</span> <span class="attr">onclick</span>=<span class="string">"cm_stereographic_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> <span class="attr">devices</span>=<span class="string">"flash|webgl"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"av"</span> <span class="attr">caption</span>=<span class="string">"建筑视角"</span> <span class="attr">onclick</span>=<span class="string">"cm_architectural_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"pv"</span> <span class="attr">caption</span>=<span class="string">"帕尼尼视角"</span> <span class="attr">onclick</span>=<span class="string">"cm_pannini_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> <span class="attr">devices</span>=<span class="string">"flash|webgl"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"lp"</span> <span class="attr">caption</span>=<span class="string">"小行星视角"</span> <span class="attr">onclick</span>=<span class="string">"cm_littleplanet_view();"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">showif</span>=<span class="string">"false"</span> <span class="attr">devices</span>=<span class="string">"flash|webgl"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">contextmenu</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="kua-wang"><em><strong>跨网</strong></em></span><a href="#kua-wang" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--security flashplayer和html5相关的安全/跨域设置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--cors 设置是否开启跨网络认证，off\anonymous\use-credentials--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">security</span> <span class="attr">cors</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置加载文件的url    （仅flash）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">crossdomainxml</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--允许被访问的域名设置    只读--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">allowdomain</span> <span class="attr">domain</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="quan-ju-shi-jian"><em><strong>全局事件</strong></em></span><a href="#quan-ju-shi-jian" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--全局事件 指定name会变成局部的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">events</span> <span class="attr">keep</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">onclick</span>=<span class="string">"skin_showthumbs();js(listen_mouse(get(mouse.x),get(mouse.y)));"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">onviewchange</span>=<span class="string">"js(listen_angle(get(view.hlookat),get(view.vlookat)));"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">onloadcomplete</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">               ifnot(hadopen,</span></span></span><br><span class="line"><span class="tag"><span class="string">                   skin_showthumbs();set(hadopen,true);</span></span></span><br><span class="line"><span class="tag"><span class="string">               );</span></span></span><br><span class="line"><span class="tag"><span class="string">               ifnot(layer[skin_title_logo3].enabled,</span></span></span><br><span class="line"><span class="tag"><span class="string">                   set(layer[skin_title_logo3].enabled,true);</span></span></span><br><span class="line"><span class="tag"><span class="string">                   set(layer[skin_title_pr].enabled,true);</span></span></span><br><span class="line"><span class="tag"><span class="string">                   delayedcall(startpic1,1.5,tween(layer[startpic_container].ox,2500,1));</span></span></span><br><span class="line"><span class="tag"><span class="string">                   delayedcall(startpic2,2.5,set(layer[startpic_container].enabled,false);set(layer[startpic_container].visible,false));</span></span></span><br><span class="line"><span class="tag"><span class="string">               )"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">onmousedown</span>=<span class="string">"js(listen_keydown(get(mouse.x), get(mouse.y)));"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">onmouseup</span>=<span class="string">"js(listen_keyup(get(mouse.x), get(mouse.y)));"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">onmousewheel</span>=<span class="string">"js(mouseWheel(get(view.fov)));"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="mo-ren-pi-fu-de-ge-xiang-can-shu"><em><strong>默认皮肤的各项参数</strong></em></span><a href="#mo-ren-pi-fu-de-ge-xiang-can-shu" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--thumbs_text Boolean 缩略图文本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--tooltips_thumbs Boolean 缩略图上显示鼠标hover文案提示--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">skin_settings</span> <span class="attr">maps</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maps_type</span>=<span class="string">"google"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maps_bing_api_key</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maps_google_api_key</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maps_zoombuttons</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">gyro</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">webvr</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">webvr_gyro_keeplookingdirection</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">webvr_prev_next_hotspots</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">littleplanetintro</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">title</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_width</span>=<span class="string">"120"</span> <span class="attr">thumbs_height</span>=<span class="string">"80"</span> <span class="attr">thumbs_padding</span>=<span class="string">"10"</span> <span class="attr">thumbs_crop</span>=<span class="string">"0|40|240|160"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_opened</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_text</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_dragging</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_onhoverscrolling</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_scrollbuttons</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_scrollindicator</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">thumbs_loop</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">tooltips_buttons</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">tooltips_thumbs</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">tooltips_hotspots</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">tooltips_mapspots</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">deeplinking</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">loadscene_flags</span>=<span class="string">"MERGE"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">loadscene_blend</span>=<span class="string">"OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">loadscene_blend_prev</span>=<span class="string">"SLIDEBLEND(0.5, 180, 0.75, linear)"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">loadscene_blend_next</span>=<span class="string">"SLIDEBLEND(0.5,   0, 0.75, linear)"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">loadingtext</span>=<span class="string">"loading..."</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout_width</span>=<span class="string">"100%"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">layout_maxwidth</span>=<span class="string">"814"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_width</span>=<span class="string">"-24"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_height</span>=<span class="string">"40"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_offset</span>=<span class="string">"20"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_offset_closed</span>=<span class="string">"-40"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_overlap.no-fractionalscaling</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">controlbar_overlap.fractionalscaling</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_skin_images</span>=<span class="string">"vtourskin.png"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_bgcolor</span>=<span class="string">"0x2D3E50"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_bgalpha</span>=<span class="string">"0.8"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_bgborder</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_bgroundedge</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_bgshadow</span>=<span class="string">"0 4 10 0x000000 0.3"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_thumbborder_bgborder</span>=<span class="string">"3 0xFFFFFF 1.0"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_thumbborder_padding</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_thumbborder_bgroundedge</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_text_css</span>=<span class="string">"color:#FFFFFF; font-family:Arial;"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">design_text_shadow</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>VR</category>
      </categories>
      <tags>
        <tag>krpano</tag>
      </tags>
  </entry>
  <entry>
    <title>krpano vtourskin.xml</title>
    <url>/2020/01/28/krpano-vtourskin-xml/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>点击下载</code>  <a href="https://github.com/blackKr/source/blob/master/krpano/vtourskin.xml">vtourskin.xml</a></p>
<a id="more"></a>

<h1><span id="tuo-luo-yi-kong-zhi"><strong><em>陀螺仪控制</em></strong></span><a href="#tuo-luo-yi-kong-zhi" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--陀螺仪默认配置 enabled = true 默认开启陀螺仪--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--url 原来是空字符串 现在改为 gyro2.js 路径--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- gyro plugin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">"skin_gyro"</span> <span class="attr">keep</span>=<span class="string">"true"</span> <span class="attr">url</span>=<span class="string">"%SWFPATH%/plugins/gyro2.js"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">html5_url</span>=<span class="string">"%SWFPATH%/plugins/gyro2.js"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">softstart</span>=<span class="string">"1.0"</span> <span class="attr">enabled</span>=<span class="string">"true"</span> <span class="attr">onavailable</span>=<span class="string">"skin_arrange_buttons();"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">devices</span>=<span class="string">"html5"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--初始化判断是否支持渲染陀螺仪的位置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- determine the visibility of the buttons and calculate their positions --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"skin_arrange_buttons"</span> <span class="attr">scope</span>=<span class="string">"local"</span>&gt;</span></span><br><span class="line">   calc(show_selbuttons, scene.count GT 1);</span><br><span class="line">   calc(show_thumbutton, skin_settings.thumbs == true);</span><br><span class="line">   calc(show_mapbutton,  skin_settings.maps == true);</span><br><span class="line">   <span class="comment">&lt;!--初始化判断是否支持渲染陀螺仪的位置--&gt;</span></span><br><span class="line">   calc(show_gyrobutton, (view.vlookatrange == 180 OR lp_scene === xml.scene));</span><br><span class="line">   <span class="comment">&lt;!--calc(show_gyrobutton, plugin[skin_gyro].available == true AND (view.vlookatrange == 180 OR lp_scene === xml.scene));--&gt;</span></span><br><span class="line">   calc(show_vrbutton,   webvr.isavailable == true);</span><br><span class="line">   calc(show_fsbutton,   device.fullscreensupport == true);</span><br><span class="line"></span><br><span class="line">   set(lpos,6);</span><br><span class="line">   set(cpos,0);</span><br><span class="line">   if(show_gyrobutton, dec(cpos,20));</span><br><span class="line">   if(show_vrbutton OR plugin[webvr].mobilevr_fake_support == true, dec(cpos,24));</span><br><span class="line">   set(rpos,6);</span><br><span class="line"></span><br><span class="line">   calc(show_dirbuttons, !device.mobile AND ((area.pixelwidth + 2*cpos) GT 520) );</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_navi].visible, show_dirbuttons);</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_prev].visible, show_selbuttons);</span><br><span class="line">   copy(layer[skin_btn_next].visible, show_selbuttons);</span><br><span class="line">   if(show_selbuttons, inc(lpos,44); inc(rpos,44); );</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_thumbs].visible, show_thumbutton);</span><br><span class="line">   copy(layer[skin_btn_thumbs].x, lpos);</span><br><span class="line">   if(show_thumbutton, inc(lpos,40));</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_map].visible, show_mapbutton);</span><br><span class="line">   copy(layer[skin_btn_map].x, lpos);</span><br><span class="line">   if(show_mapbutton, inc(lpos,40));</span><br><span class="line"></span><br><span class="line">   if(show_dirbuttons,</span><br><span class="line">      copy(layer[skin_btn_navi].x, cpos);</span><br><span class="line">      inc(cpos,140);</span><br><span class="line"></span><br><span class="line">      set(layer[skin_btn_gyro].align, center);</span><br><span class="line">      copy(layer[skin_btn_gyro].visible, show_gyrobutton);</span><br><span class="line">      copy(layer[skin_btn_gyro].x, cpos);</span><br><span class="line">      if(show_gyrobutton, inc(cpos,48));</span><br><span class="line"></span><br><span class="line">      set(layer[skin_btn_vr].align, center);</span><br><span class="line">      copy(layer[skin_btn_vr].visible, show_vrbutton);</span><br><span class="line">      copy(layer[skin_btn_vr].x, cpos);</span><br><span class="line">      if(show_vrbutton, inc(cpos,80));</span><br><span class="line">     ,</span><br><span class="line">      set(layer[skin_btn_gyro].align, left);</span><br><span class="line">      copy(layer[skin_btn_gyro].visible, show_gyrobutton);</span><br><span class="line">      copy(layer[skin_btn_gyro].x, lpos);</span><br><span class="line">      if(show_gyrobutton, inc(lpos,40));</span><br><span class="line"></span><br><span class="line">      set(layer[skin_btn_vr].align, left);</span><br><span class="line">      copy(layer[skin_btn_vr].visible, show_vrbutton);</span><br><span class="line">      copy(layer[skin_btn_vr].x, lpos);</span><br><span class="line">      if(show_vrbutton, inc(lpos,80));</span><br><span class="line">   );</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_hide].x, rpos);</span><br><span class="line">   inc(rpos,40);</span><br><span class="line"></span><br><span class="line">   copy(layer[skin_btn_fs].visible, show_fsbutton);</span><br><span class="line">   copy(layer[skin_btn_fs].x, rpos);</span><br><span class="line">   if(show_fsbutton, inc(rpos,40));</span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--包含更新陀螺仪是否开启--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"skin_update_scene_infos"</span> <span class="attr">scope</span>=<span class="string">"local"</span>&gt;</span></span><br><span class="line">   if(xml.scene !== null AND scene[get(xml.scene)].index GE 0,</span><br><span class="line"></span><br><span class="line">      if(skin_settings.title,</span><br><span class="line">         if(global.title, calc(layer[skin_title].html, global.title + ' - ' + scene[get(xml.scene)].title); , copy(layer[skin_title].html, scene[get(xml.scene)].title ); );</span><br><span class="line">         delayedcall(0.1, set(layer[skin_title].visible,true) );</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if(skin_settings.thumbs_loop == false,</span><br><span class="line">         if(scene[get(xml.scene)].index GT 0,</span><br><span class="line">            set(layer[skin_btn_prev], enabled=true, alpha=1.0);</span><br><span class="line">           ,</span><br><span class="line">            set(layer[skin_btn_prev], enabled=false, alpha=0.3);</span><br><span class="line">         );</span><br><span class="line"></span><br><span class="line">         sub(lastsceneindex, scene.count, 1);</span><br><span class="line">         if(scene[get(xml.scene)].index LT lastsceneindex,</span><br><span class="line">            set(layer[skin_btn_next], enabled=true, alpha=1.0);</span><br><span class="line">           ,</span><br><span class="line">            set(layer[skin_btn_next], enabled=false, alpha=0.3);</span><br><span class="line">         );</span><br><span class="line">        ,</span><br><span class="line">         if(scene.count GT 1,</span><br><span class="line">            set(layer[skin_btn_prev], enabled=true, alpha=1.0);</span><br><span class="line">            set(layer[skin_btn_next], enabled=true, alpha=1.0);</span><br><span class="line">           ,</span><br><span class="line">            set(layer[skin_btn_prev], enabled=false, alpha=0.3);</span><br><span class="line">            set(layer[skin_btn_next], enabled=false, alpha=0.3);</span><br><span class="line">         );</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if(scene.count GT 1,</span><br><span class="line">         set(layer[skin_btn_prev_fs].visible, true);</span><br><span class="line">         set(layer[skin_btn_next_fs].visible, true);</span><br><span class="line">        ,</span><br><span class="line">         set(layer[skin_btn_prev_fs].visible, false);</span><br><span class="line">         set(layer[skin_btn_next_fs].visible, false);</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      calc(parentname, 'skin_thumb_' + scene[get(xml.scene)].index);</span><br><span class="line">      if(layer[get(parentname)],</span><br><span class="line">         set(layer[skin_thumbborder], parent=get(parentname), visible=true);</span><br><span class="line">        ,</span><br><span class="line">         set(layer[skin_thumbborder].visible, false);</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if(scene[get(xml.scene)].mapspotname,</span><br><span class="line">         layer[skin_map].activatespot(get(scene[get(xml.scene)].mapspotname));</span><br><span class="line">         layer[skin_map].pantospot(get(scene[get(xml.scene)].mapspotname));</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--判断陀螺仪是否支持--&gt;</span></span><br><span class="line">      if(plugin[skin_gyro].isavailable == true AND view.vlookatrange == 180,</span><br><span class="line">         set(layer[skin_btn_gyro].visible, true);</span><br><span class="line">        ,</span><br><span class="line">         set(layer[skin_btn_gyro].visible, true)</span><br><span class="line">         <span class="comment">&lt;!--set(layer[skin_btn_gyro].visible, false)--&gt;</span></span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if(view.vlookatrange LT 180,</span><br><span class="line">         if(skin_settings.backup_control_bouncinglimits === null,</span><br><span class="line">            copy(skin_settings.backup_control_bouncinglimits, control.bouncinglimits);</span><br><span class="line">         );</span><br><span class="line">         set(control.bouncinglimits, false);</span><br><span class="line">        ,</span><br><span class="line">         if(skin_settings.backup_control_bouncinglimits !== null,</span><br><span class="line">            copy(control.bouncinglimits, skin_settings.backup_control_bouncinglimits);</span><br><span class="line">         );</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if(scene[get(xml.scene)].isvideopano AND plugin[video] !== null,</span><br><span class="line">         skin_video_addcontrols();</span><br><span class="line">        ,</span><br><span class="line">         skin_video_removecontrols();</span><br><span class="line">      );</span><br><span class="line">   );</span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="yu-yan-mo-shi-shi-qie-huan-chang-jing-dong-zuo"><em><strong>鱼眼模式时切换场景动作</strong></em></span><a href="#yu-yan-mo-shi-shi-qie-huan-chang-jing-dong-zuo" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--鱼眼模式时切换场景动作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"skin_nextscene_loop"</span> <span class="attr">scope</span>=<span class="string">"local"</span> <span class="attr">args</span>=<span class="string">"indexadd"</span>&gt;</span></span><br><span class="line">   add(newsceneindex, scene[get(xml.scene)].index, indexadd);</span><br><span class="line">   sub(lastsceneindex, scene.count, 1);</span><br><span class="line">   if(newsceneindex LT 0, copy(newsceneindex,lastsceneindex));</span><br><span class="line">   if(newsceneindex GT lastsceneindex, set(newsceneindex,0));</span><br><span class="line">   skin_loadscene(get(newsceneindex), calc(indexadd LT 0 ? skin_settings.loadscene_blend_prev : skin_settings.loadscene_blend_next));</span><br><span class="line">   js(eyeChangeVr(get(scene[get(xml.scene)].index)));</span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="vr-suo-lue-tu-lie-biao"><em><strong>vr缩略图列表</strong></em></span><a href="#vr-suo-lue-tu-lie-biao" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--vr缩略图列表--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"skin_addthumbs"</span> <span class="attr">scope</span>=<span class="string">"local"</span>&gt;</span></span><br><span class="line">   if(skin_settings.thumbs == false,</span><br><span class="line">      set(layer[skin_btn_thumbs].visible,false);</span><br><span class="line">     ,</span><br><span class="line">      copy(thumbwidth, skin_settings.thumbs_width);</span><br><span class="line">      copy(thumbheight, skin_settings.thumbs_height);</span><br><span class="line">      copy(thumbpadding, skin_settings.thumbs_padding);</span><br><span class="line">      copy(thumbcrop, skin_settings.thumbs_crop);</span><br><span class="line"></span><br><span class="line">      calc(thumbxoffset, thumbwidth + thumbpadding);</span><br><span class="line">      calc(thumbxcenter, thumbxoffset * 0.5);</span><br><span class="line">      calc(thumbbarwidth, thumbxoffset * scene.count + thumbpadding);</span><br><span class="line">      calc(thumbbarheight, thumbpadding + thumbheight + thumbpadding);</span><br><span class="line"></span><br><span class="line">      if(skin_settings.thumbs_scrollindicator,</span><br><span class="line">         copy(layer[skin_thumbs_scrollindicator].y, thumbbarheight);</span><br><span class="line">         add(thumbbarheight, layer[skin_thumbs_scrollindicator].height);</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      set(layer[skin_thumbs], width=get(thumbbarwidth), height=get(thumbbarheight) );</span><br><span class="line"></span><br><span class="line">      calc(layer[skin_thumbs_scrollleft].y, thumbbarheight * 0.5);</span><br><span class="line">      calc(layer[skin_thumbs_scrollright].y, thumbbarheight * 0.5);</span><br><span class="line"></span><br><span class="line">      for(set(i,0), i LT scene.count, inc(i),</span><br><span class="line">         calc(thumbname, 'skin_thumb_' + i);</span><br><span class="line">         addlayer(get(thumbname));</span><br><span class="line"></span><br><span class="line">         set(layer[get(thumbname)],</span><br><span class="line">            url=get(scene[get(i)].thumburl),</span><br><span class="line">            keep=true,</span><br><span class="line">            parent='skin_thumbs',</span><br><span class="line">            align='lefttop',</span><br><span class="line">            crop=get(thumbcrop),</span><br><span class="line">            width=get(thumbwidth),</span><br><span class="line">            height=get(thumbheight),</span><br><span class="line">            x=calc(thumbpadding + i*thumbxoffset),</span><br><span class="line">            y=get(thumbpadding),</span><br><span class="line">            linkedscene=get(scene[get(i)].name),</span><br><span class="line">            onclick='copy(layer[skin_thumbborder].parent, name); skin_loadscene(get(linkedscene),get(skin_settings.loadscene_blend));js(thumbClick(get(linkedscene)));'</span><br><span class="line">         );</span><br><span class="line"></span><br><span class="line">         set(scene[get(i)],</span><br><span class="line">            thumbx=calc(thumbpadding + i*thumbxoffset + thumbxcenter),</span><br><span class="line">            thumby=get(thumbpadding)</span><br><span class="line">         );</span><br><span class="line"></span><br><span class="line">         if(skin_settings.tooltips_thumbs,</span><br><span class="line">            set(layer[get(thumbname)].tooltip, get(scene[get(i)].title) );</span><br><span class="line">            layer[get(thumbname)].loadstyle(skin_tooltips);</span><br><span class="line">         );</span><br><span class="line">         if(skin_settings.thumbs_text,</span><br><span class="line">            calc(thumbtext, 'skin_thumbtext_' + i);</span><br><span class="line">            addlayer(get(thumbtext));</span><br><span class="line">            layer[get(thumbtext)].loadstyle(skin_thumbtext_style);</span><br><span class="line">            set(layer[get(thumbtext)], keep=true, parent=get(thumbname), html=get(scene[get(i)].title) );</span><br><span class="line">         );</span><br><span class="line">       );</span><br><span class="line"></span><br><span class="line">      if(scene.count == 1,</span><br><span class="line">         set(layer[skin_thumbs].align, 'lefttop');</span><br><span class="line">      );</span><br><span class="line">   );</span><br><span class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h1><span id="luo-pan"><em><strong>罗盘</strong></em></span><a href="#luo-pan" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--罗盘--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">vtourskinxmlpath</span> <span class="attr">url</span>=<span class="string">"./"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"sprtestyle"</span> <span class="attr">url</span>=<span class="string">"http://cdn.haofang.net/static/publickWeb/krpano/sprites.png"</span>/&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"needlestyle"</span> <span class="attr">url</span>=<span class="string">"http://cdn.haofang.net/static/publickWeb/krpano/needle.png"</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>


<h1><span id="di-bu-an-niu-pei-zhi"><em><strong>底部按钮配置</strong></em></span><a href="#di-bu-an-niu-pei-zhi" class="header-anchor">#</a></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--底部按钮配置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- skin layout --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_layer"</span> <span class="attr">keep</span>=<span class="string">"true"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"top"</span> <span class="attr">width</span>=<span class="string">"get:skin_settings.layout_width"</span> <span class="attr">maxwidth</span>=<span class="string">"get:skin_settings.layout_maxwidth"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">maskchildren</span>=<span class="string">"true"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">bgcapture</span>=<span class="string">"false"</span> <span class="attr">zorder</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_scroll_window"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"calc:skin_settings.controlbar_offset + skin_settings.controlbar_height - skin_settings.controlbar_overlap"</span> <span class="attr">maskchildren</span>=<span class="string">"true"</span> <span class="attr">onloaded</span>=<span class="string">"skin_calc_opened_closed();"</span> <span class="attr">zorder</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_scroll_layer"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"get:skin_settings.controlbar_width"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"200"</span> <span class="attr">y_offset</span>=<span class="string">"get:skin_settings.controlbar_overlap"</span> <span class="attr">accuracy</span>=<span class="string">"1"</span> <span class="attr">bgalpha</span>=<span class="string">"get:skin_settings.design_bgalpha"</span> <span class="attr">bgcolor</span>=<span class="string">"get:skin_settings.design_bgcolor"</span> <span class="attr">bgborder</span>=<span class="string">"get:skin_settings.design_bgborder"</span> <span class="attr">bgroundedge</span>=<span class="string">"get:skin_settings.design_bgroundedge"</span> <span class="attr">bgshadow</span>=<span class="string">"get:skin_settings.design_bgshadow"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_title"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">edge</span>=<span class="string">"leftbottom"</span> <span class="attr">x</span>=<span class="string">"4"</span> <span class="attr">y</span>=<span class="string">"0"</span> <span class="attr">zorder</span>=<span class="string">"4"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> <span class="attr">bg</span>=<span class="string">"false"</span> <span class="attr">css</span>=<span class="string">"calc:skin_settings.design_text_css + ' text-align:left; font-style:italic; font-size:12px;'"</span> <span class="attr">textshadow</span>=<span class="string">"get:skin_settings.design_text_shadow"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">onautosized</span>=<span class="string">"skin_video_updateseekbarwidth();"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_controls"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">edge</span>=<span class="string">"leftbottom"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"18"</span> <span class="attr">visible</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_seekbar_container"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">bgcapture</span>=<span class="string">"true"</span> <span class="attr">ondown</span>=<span class="string">"skin_video_ondownseeking();"</span> &gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_seekbar"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">bgcolor</span>=<span class="string">"0xFFFFFF"</span> <span class="attr">bgalpha</span>=<span class="string">"0.25"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_loadbar"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">bgcolor</span>=<span class="string">"0xFFFFFF"</span> <span class="attr">bgalpha</span>=<span class="string">"0.5"</span> <span class="attr">align</span>=<span class="string">"left"</span> <span class="attr">width</span>=<span class="string">"0"</span> <span class="attr">height</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_seekpos"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">bgcolor</span>=<span class="string">"0xFFFFFF"</span> <span class="attr">bgalpha</span>=<span class="string">"1.0"</span> <span class="attr">align</span>=<span class="string">"left"</span> <span class="attr">edge</span>=<span class="string">"center"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">bgroundedge</span>=<span class="string">"8"</span> <span class="attr">width</span>=<span class="string">"10"</span> <span class="attr">height</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_video_time"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">align</span>=<span class="string">"rightbottom"</span> <span class="attr">x</span>=<span class="string">"4"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> <span class="attr">bg</span>=<span class="string">"false"</span> <span class="attr">css</span>=<span class="string">"calc:skin_settings.design_text_css + ' text-align:left; font-style:italic; font-size:12px;'"</span> <span class="attr">textshadow</span>=<span class="string">"get:skin_settings.design_text_shadow"</span> <span class="attr">html</span>=<span class="string">"0:00 / 0:00"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_scroll_container"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"0"</span> <span class="attr">bgroundedge</span>=<span class="string">"get:skin_settings.design_bgroundedge"</span> <span class="attr">maskchildren</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbs_container"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">visible</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbs_scrollleft"</span>  <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|64|64|64"</span>  <span class="attr">align</span>=<span class="string">"lefttop"</span>  <span class="attr">edge</span>=<span class="string">"left"</span>  <span class="attr">x</span>=<span class="string">"5"</span> <span class="attr">y</span>=<span class="string">"50"</span> <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">zorder</span>=<span class="string">"2"</span> <span class="attr">alpha</span>=<span class="string">"1.0"</span> <span class="attr">ondown2</span>=<span class="string">"asyncloop(pressed, layer[skin_thumbs].scrollby(+2,0));"</span> <span class="attr">visible</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbs_scrollright"</span> <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|64|64|64"</span> <span class="attr">align</span>=<span class="string">"righttop"</span> <span class="attr">edge</span>=<span class="string">"right"</span> <span class="attr">x</span>=<span class="string">"5"</span> <span class="attr">y</span>=<span class="string">"50"</span> <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">zorder</span>=<span class="string">"2"</span> <span class="attr">alpha</span>=<span class="string">"1.0"</span> <span class="attr">ondown2</span>=<span class="string">"asyncloop(pressed, layer[skin_thumbs].scrollby(-2,0));"</span> <span class="attr">visible</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbs_scrollindicator"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">bgcolor</span>=<span class="string">"0xFFFFFF"</span> <span class="attr">bgalpha</span>=<span class="string">"0.25"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">width</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"2"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbs"</span> <span class="attr">state</span>=<span class="string">"closed"</span> <span class="attr">url.flash</span>=<span class="string">"%SWFPATH%/plugins/scrollarea.swf"</span> <span class="attr">url.html5</span>=<span class="string">"%SWFPATH%/plugins/scrollarea.js"</span> <span class="attr">direction</span>=<span class="string">"h"</span> <span class="attr">align</span>=<span class="string">"top"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100"</span> <span class="attr">zorder</span>=<span class="string">"1"</span> <span class="attr">onloaded</span>=<span class="string">"skin_updatescroll();"</span> <span class="attr">onscroll</span>=<span class="string">"skin_updatethumbscroll();"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_map_container"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"leftop"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">bgroundedge</span>=<span class="string">"get:skin_settings.design_bgroundedge"</span> <span class="attr">maskchildren</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_map"</span> <span class="attr">state</span>=<span class="string">"closed"</span> <span class="attr">url</span>=<span class="string">""</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"50%"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"0"</span> <span class="attr">zorder</span>=<span class="string">"1"</span> <span class="attr">lat</span>=<span class="string">"0"</span> <span class="attr">lng</span>=<span class="string">"0"</span> <span class="attr">zoom</span>=<span class="string">"10"</span> <span class="attr">bgalpha</span>=<span class="string">"0"</span> <span class="attr">maptype</span>=<span class="string">"satellite"</span> <span class="attr">onmapready</span>=<span class="string">"skin_addmapspots();"</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">maptypecontrol</span> <span class="attr">visible</span>=<span class="string">"true"</span> <span class="attr">align</span>=<span class="string">"righttop"</span> <span class="attr">x</span>=<span class="string">"5"</span> <span class="attr">y</span>=<span class="string">"5"</span> <span class="attr">buttonalign</span>=<span class="string">"v"</span> <span class="attr">scale.mobile</span>=<span class="string">"1.5"</span> /&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">radar</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">headingoffset</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">spotstyle</span> <span class="attr">name</span>=<span class="string">"DEFAULT"</span> <span class="attr">url</span>=<span class="string">"vtourskin_mapspot.png"</span> <span class="attr">activeurl</span>=<span class="string">"vtourskin_mapspotactive.png"</span> <span class="attr">edge</span>=<span class="string">"bottom"</span> <span class="attr">x</span>=<span class="string">"-5"</span> <span class="attr">y</span>=<span class="string">"-8"</span> <span class="attr">scale</span>=<span class="string">"0.5"</span> /&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_map_zoom_in"</span>  <span class="attr">style</span>=<span class="string">"skin_base"</span> <span class="attr">visible</span>=<span class="string">"get:skin_settings.maps_zoombuttons"</span> <span class="attr">crop</span>=<span class="string">"9|512|46|64"</span>  <span class="attr">align</span>=<span class="string">"right"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"-40"</span> <span class="attr">zorder</span>=<span class="string">"2"</span> <span class="attr">ondown</span>=<span class="string">"layer[skin_map].zoomin();  skin_buttonglow(get(name));"</span> <span class="attr">onup</span>=<span class="string">"skin_buttonglow(null);"</span> /&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_map_zoom_out"</span> <span class="attr">style</span>=<span class="string">"skin_base"</span> <span class="attr">visible</span>=<span class="string">"get:skin_settings.maps_zoombuttons"</span> <span class="attr">crop</span>=<span class="string">"73|512|46|64"</span> <span class="attr">align</span>=<span class="string">"right"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"+40"</span> <span class="attr">zorder</span>=<span class="string">"2"</span> <span class="attr">ondown</span>=<span class="string">"layer[skin_map].zoomout(); skin_buttonglow(get(name));"</span> <span class="attr">onup</span>=<span class="string">"skin_buttonglow(null);"</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_splitter_bottom"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"calc:skin_settings.controlbar_offset + skin_settings.controlbar_height - skin_settings.controlbar_overlap"</span> <span class="attr">y</span>=<span class="string">"0"</span> <span class="attr">maskchildren</span>=<span class="string">"true"</span> <span class="attr">onloaded</span>=<span class="string">"skin_calc_opened_closed();"</span> <span class="attr">zorder</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_control_bar_bg"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"get:skin_settings.controlbar_width"</span> <span class="attr">height</span>=<span class="string">"calc:skin_settings.controlbar_height + skin_settings.controlbar_overlap"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"get:skin_settings.controlbar_offset"</span> <span class="attr">bgcolor</span>=<span class="string">"get:skin_settings.design_bgcolor"</span> <span class="attr">bgalpha</span>=<span class="string">"get:skin_settings.design_bgalpha"</span> <span class="attr">bgborder</span>=<span class="string">"get:skin_settings.design_bgborder"</span> <span class="attr">bgroundedge</span>=<span class="string">"get:skin_settings.design_bgroundedge"</span> <span class="attr">bgshadow</span>=<span class="string">"get:skin_settings.design_bgshadow"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_control_bar"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"get:skin_settings.controlbar_width"</span> <span class="attr">height</span>=<span class="string">"calc:skin_settings.controlbar_height"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"get:skin_settings.controlbar_offset"</span> <span class="attr">onloaded</span>=<span class="string">"skin_calc_opened_closed();"</span> <span class="attr">zorder</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_control_bar_buttons"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"leftbottom"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"get:skin_settings.controlbar_height"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--底部切换上一个VR图--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_prev"</span>      <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|64|64|64"</span>   <span class="attr">align</span>=<span class="string">"left"</span>        <span class="attr">x</span>=<span class="string">"5"</span>    <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">alpha</span>=<span class="string">"0.5"</span>  <span class="attr">onclick</span>=<span class="string">"if(skin_settings.thumbs_loop, skin_nextscene_loop(-1), skin_nextscene(-1) );js(bottomBtnChangeVr(get(scene[get(xml.scene)].name)));"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_thumbs"</span>    <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|128|64|64"</span>  <span class="attr">align</span>=<span class="string">"left"</span>        <span class="attr">x</span>=<span class="string">"50"</span>   <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"skin_showmap(false); skin_showthumbs();"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_map"</span>       <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|128|64|64"</span> <span class="attr">align</span>=<span class="string">"left"</span>        <span class="attr">x</span>=<span class="string">"90"</span>   <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"skin_showthumbs(false); skin_showmap();"</span> <span class="attr">visible</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--底部按钮 上下左右缩放--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_navi"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">"240"</span> <span class="attr">height</span>=<span class="string">"32"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_left"</span>  <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|192|64|64"</span>  <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"-100"</span> <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(hlookat_moveforce,-1);"</span> <span class="attr">onup2</span>=<span class="string">"set(hlookat_moveforce,0);"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_right"</span> <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|192|64|64"</span> <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"-60"</span>  <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(hlookat_moveforce,+1);"</span> <span class="attr">onup2</span>=<span class="string">"set(hlookat_moveforce,0);"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_up"</span>    <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|256|64|64"</span>  <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"-20"</span>  <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(vlookat_moveforce,-1);"</span> <span class="attr">onup2</span>=<span class="string">"set(vlookat_moveforce,0);"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_down"</span>  <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|256|64|64"</span> <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"+20"</span>  <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(vlookat_moveforce,+1);"</span> <span class="attr">onup2</span>=<span class="string">"set(vlookat_moveforce,0);"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--底部按钮 放大--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_in"</span>    <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|320|64|64"</span>  <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"+60"</span>  <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(fov_moveforce,-1);"</span>  <span class="attr">onup2</span>=<span class="string">"set(fov_moveforce,0);js(bottomBtnScaleVr(get(view.fov)));"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--底部按钮 搜小--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_out"</span>   <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|320|64|64"</span> <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"+100"</span> <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">ondown2</span>=<span class="string">"set(fov_moveforce,+1);"</span>     <span class="attr">onup2</span>=<span class="string">"set(fov_moveforce,0);js(bottomBtnScaleVr(get(view.fov)));"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_gyro"</span>      <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|384|64|64"</span>  <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"+140"</span> <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">onclick</span>=<span class="string">"switch(plugin[skin_gyro].enabled); if(plugin[skin_gyro].enabled, skin_showmap(false));"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">devices</span>=<span class="string">"html5"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_vr"</span>        <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|0|80|64"</span>    <span class="attr">align</span>=<span class="string">"center"</span>      <span class="attr">x</span>=<span class="string">"+146"</span> <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">onclick</span>=<span class="string">"webvr.enterVR();"</span> <span class="attr">visible</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_fs"</span>        <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|576|64|64"</span>  <span class="attr">align</span>=<span class="string">"right"</span>       <span class="attr">x</span>=<span class="string">"90"</span>   <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">onclick</span>=<span class="string">"switch(fullscreen);"</span> <span class="attr">devices</span>=<span class="string">"fullscreensupport"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_hide"</span>      <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"0|448|64|64"</span>  <span class="attr">align</span>=<span class="string">"right"</span>       <span class="attr">x</span>=<span class="string">"50"</span>   <span class="attr">y</span>=<span class="string">"0"</span>  <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">onclick</span>=<span class="string">"skin_hideskin()"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_show"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">bgcapture</span>=<span class="string">"true"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"get:skin_settings.controlbar_height"</span> <span class="attr">y</span>=<span class="string">"calc:skin_settings.controlbar_height - skin_settings.controlbar_offset_closed"</span> <span class="attr">onclick</span>=<span class="string">"skin_showskin()"</span> <span class="attr">onhover</span>=<span class="string">"tween(alpha,1.0);"</span> <span class="attr">onout</span>=<span class="string">"tween(alpha,0.25);"</span> <span class="attr">ondown.touch</span>=<span class="string">"onhover();"</span> <span class="attr">onup.touch</span>=<span class="string">"onout();"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">capture</span>=<span class="string">"false"</span> <span class="attr">alpha</span>=<span class="string">"0.0"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_show_icon"</span> <span class="attr">style</span>=<span class="string">"skin_base"</span> <span class="attr">crop</span>=<span class="string">"64|448|64|64"</span> <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">align</span>=<span class="string">"bottom"</span> <span class="attr">y</span>=<span class="string">"2"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--底部切换下一个VR图--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_btn_next"</span> <span class="attr">style</span>=<span class="string">"skin_base|skin_glow"</span> <span class="attr">crop</span>=<span class="string">"64|64|64|64"</span>  <span class="attr">align</span>=<span class="string">"right"</span>       <span class="attr">x</span>=<span class="string">"5"</span>    <span class="attr">y</span>=<span class="string">"0"</span>   <span class="attr">scale</span>=<span class="string">"0.5"</span> <span class="attr">alpha</span>=<span class="string">"0.5"</span>  <span class="attr">onclick</span>=<span class="string">"if(skin_settings.thumbs_loop, skin_nextscene_loop(+1), skin_nextscene(+1) );js(bottomBtnChangeVr(get(scene[get(xml.scene)].name)));"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_loadingtext"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">x</span>=<span class="string">"5"</span> <span class="attr">y</span>=<span class="string">"-5"</span> <span class="attr">html</span>=<span class="string">"get:skin_settings.loadingtext"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">bg</span>=<span class="string">"false"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> <span class="attr">css</span>=<span class="string">"calc:skin_settings.design_text_css + ' text-align:center; font-style:italic; font-size:22px;'"</span> <span class="attr">textshadow</span>=<span class="string">"get:skin_settings.design_text_shadow"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_buttonglow"</span>  <span class="attr">style</span>=<span class="string">"skin_base"</span> <span class="attr">crop</span>=<span class="string">"64|384|64|64"</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">x</span>=<span class="string">"0"</span> <span class="attr">y</span>=<span class="string">"1"</span> <span class="attr">scale</span>=<span class="string">"1.0"</span> <span class="attr">alpha</span>=<span class="string">"0.0"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">layer</span> <span class="attr">name</span>=<span class="string">"skin_thumbborder"</span> <span class="attr">type</span>=<span class="string">"container"</span> <span class="attr">x</span>=<span class="string">"get:skin_settings.design_thumbborder_padding"</span> <span class="attr">y</span>=<span class="string">"get:skin_settings.design_thumbborder_padding"</span> <span class="attr">width</span>=<span class="string">"calc:skin_settings.thumbs_width - 2*skin_settings.design_thumbborder_padding"</span> <span class="attr">height</span>=<span class="string">"calc:skin_settings.thumbs_height - 2*skin_settings.design_thumbborder_padding"</span> <span class="attr">visible</span>=<span class="string">"false"</span> <span class="attr">enabled</span>=<span class="string">"false"</span> <span class="attr">align</span>=<span class="string">"lefttop"</span> <span class="attr">bgborder</span>=<span class="string">"get:skin_settings.design_thumbborder_bgborder"</span> <span class="attr">bgroundedge</span>=<span class="string">"get:skin_settings.design_thumbborder_bgroundedge"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>VR</category>
      </categories>
      <tags>
        <tag>krpano</tag>
      </tags>
  </entry>
  <entry>
    <title>krpano 使用教程</title>
    <url>/2020/01/28/krpano-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1><span id="quan-ju-ke-yi-shi-yong-de-yi-xie-zhi"><em><strong>全局可以使用的一些值</strong></em></span><a href="#quan-ju-ke-yi-shi-yong-de-yi-xie-zhi" class="header-anchor">#</a></h1><pre><code>场景scene：
scene[name].content
scene.count
scene[name].index
scene.onstart

陀螺仪事件：
&lt;plugin name=&quot;gyro&quot;  /&gt; name值就是一会调用的key
onavailable:   在支持陀螺仪的设备上调用
onunavailable：在不支持陀螺仪的设备上调用
onenable： 在陀螺仪启用的时候调用
ondisable： 在陀螺仪禁用的时候调用</code></pre><a id="more"></a>

<h1><span id="js-wen-jian-diao-yong-krpano-fang-fa"><em><strong>js 文件调用krpano方法</strong></em></span><a href="#js-wen-jian-diao-yong-krpano-fang-fa" class="header-anchor">#</a></h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*定义控件*/</span></span><br><span class="line"><span class="keyword">var</span> krpano = <span class="built_in">document</span>.getElementById(<span class="string">"krpanoSWFObject"</span>);</span><br><span class="line"><span class="comment">/*获取变量*/</span></span><br><span class="line"><span class="keyword">var</span> fov = <span class="built_in">Number</span>(krpano.get(<span class="string">"view.fov"</span>));</span><br><span class="line"><span class="keyword">var</span> hlookat = <span class="built_in">Number</span>(krpano.get(<span class="string">"view.hlookat"</span>));</span><br><span class="line"><span class="keyword">var</span> vlookat = <span class="built_in">Number</span>(krpano.get(<span class="string">"view.vlookat"</span>));</span><br><span class="line"><span class="comment">/*放大*/</span></span><br><span class="line"> fov -= <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.fov"</span>, fov);</span><br><span class="line"><span class="comment">/*缩小*/</span></span><br><span class="line"> fov += <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.fov"</span>, fov);</span><br><span class="line"><span class="comment">/*左旋转*/</span></span><br><span class="line"> hlookat += <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.hlookat"</span>, hlookat);</span><br><span class="line"><span class="comment">/*右旋转*/</span></span><br><span class="line"> hlookat -= <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.hlookat"</span>, hlookat);</span><br><span class="line"><span class="comment">/*上倾斜*/</span></span><br><span class="line"> vlookat -= <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.vlookat"</span>, vlookat);</span><br><span class="line"><span class="comment">/*下倾斜*/</span></span><br><span class="line"> vlookat += <span class="number">10.0</span>;</span><br><span class="line"> krpano.set(<span class="string">"view.vlookat"</span>, vlookat);</span><br><span class="line"><span class="comment">/*自动旋转*/</span></span><br><span class="line"> krpano.set(<span class="string">"autorotate.enabled"</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">/*VR模式*/</span></span><br><span class="line"> krpano.call(<span class="string">"WebVR.enterVR();"</span>);</span><br><span class="line"><span class="comment">/*全屏*/</span></span><br><span class="line"> krpano.set(<span class="string">"fullscreen"</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">/*停止旋转*/</span></span><br><span class="line"> krpano.set(<span class="string">"autorotate.enabled"</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 以上的方法如放大缩小是不带动画的，有卡顿的感觉。下面的方法利用setTimeout方法实现平滑过渡。</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*放大*/</span></span><br><span class="line"> krpano.set(<span class="string">"fov_moveforce"</span>,<span class="number">-1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('fov_moveforce',0)"</span>,<span class="number">200</span>);</span><br><span class="line"> <span class="comment">/*缩小*/</span></span><br><span class="line"> krpano.set(<span class="string">"fov_moveforce"</span>,<span class="number">1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('fov_moveforce',0)"</span>,<span class="number">200</span>);</span><br><span class="line"> <span class="comment">/*左旋转*/</span></span><br><span class="line"> krpano.set(<span class="string">"hlookat_moveforce"</span>,<span class="number">-1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('hlookat_moveforce',0)"</span>,<span class="number">200</span>);</span><br><span class="line"> <span class="comment">/*右旋转*/</span></span><br><span class="line"> krpano.set(<span class="string">"hlookat_moveforce"</span>,<span class="number">1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('hlookat_moveforce',0)"</span>,<span class="number">200</span>);</span><br><span class="line"> <span class="comment">/*上倾斜*/</span></span><br><span class="line"> krpano.set(<span class="string">"vlookat_moveforce"</span>,<span class="number">-1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('vlookat_moveforce',0)"</span>,<span class="number">200</span>);</span><br><span class="line"> <span class="comment">/*下倾斜*/</span></span><br><span class="line"> krpano.set(<span class="string">"vlookat_moveforce"</span>,<span class="number">1</span>);</span><br><span class="line"> setTimeout(<span class="string">"krpano.set('vlookat_moveforce',0)"</span>,<span class="number">200</span>);</span><br></pre></td></tr></table></figure>


<h1><span id="tour-xml-can-shu-pei-zhi-shuo-ming"><strong><em>tour.xml参数配置说明</em></strong></span><a href="#tour-xml-can-shu-pei-zhi-shuo-ming" class="header-anchor">#</a></h1><pre><code>[
  krpano    xml文件的根元素，所有的元素必须放在该元素中
  version     创建xml文件的krpano版本，默认1.19
  onstart    将在xml加载和解析后直接调用
]

[ include 加载文件 加载的内容将替换include元素  英文：包括 ]</code></pre><p><img src="/images/krpano/tour-xml.jpeg" alt></p>
<pre><code> [
  skin_settings    默认皮肤的各项参数
  maps    是否使用必应地图或者谷歌地图
 ]

[ maps_type HTML5下选择使用必应地图或者谷歌地图，值为bing或者google  谷歌地图不提供flash版本，因此在flash内核下默认使用必应地图 ]
  maps_type=&quot;google&quot;
  [maps_bing_api_key     在微软申请的地图api的key 免费 ]
 maps_bing_api_key=&quot;&quot;
  [maps_google_api_key     在微软申请的地图api的key 免费 ]
 maps_google_api_key=&quot;&quot;
  [ maps_zoombuttons     是否显示在线地图的缩放按钮 ]
 maps_zoombuttons=&quot;false&quot;
 [ gyro    是否使用陀螺仪（重力感应），只会在移动端的浏览器实现 默认开启 ]
 gyro=&quot;true&quot;                   
 webvr=&quot;true&quot;
 webvr_gyro_keeplookingdirection=&quot;false&quot;
 webvr_prev_next_hotspots=&quot;true&quot;
 littleplanetintro=&quot;false&quot;
 title=&quot;true&quot;
 thumbs=&quot;true&quot;
[
    thumbs_width    缩略图宽度
    thumbs_height    缩略图高度
    thumbs_padding    每个缩略图之间的距离
    thumbs_crop=&quot;0|40|240|160&quot;    从某一个坐标开始截取一个区域  从“x=0 y=40”的坐标点开始，截取一个x=240像素，y=160像素的图片
]
 thumbs_width=&quot;120&quot; thumbs_height=&quot;80&quot; thumbs_padding=&quot;10&quot;          thumbs_crop=&quot;0|40|240|160&quot;
 [thumbs_opened     是否在打开漫游时显示缩略图 ]
 thumbs_opened=&quot;false&quot;
 [thumbs_text     是否显示缩略图图文本 ]
 thumbs_text=&quot;false&quot;
 [thumbs_dragging     是否允许拖拽缩略图左右滑动 ]
 thumbs_dragging=&quot;true&quot;
  [ thumbs_onhoverscrolling     是否允许缩略图根据鼠标运动方向自动往两侧滑动 ]
 thumbs_onhoverscrolling=&quot;false&quot;
  [ thumbs_scrollbuttons     是否显示缩略图两段的箭头按钮 ]
 thumbs_scrollbuttons=&quot;false&quot;
  [ thumbs_scrollindicator     是否显示缩略图下方的滑动条 ]
 thumbs_scrollindicator=&quot;false&quot;
 thumbs_loop=&quot;false&quot;
 tooltips_buttons=&quot;false&quot;
  [ tooltips_thumbs     是否在缩略图上显示提示文字 ]
 tooltips_thumbs=&quot;false&quot;
  [ tooltips_hotspots 是否在热点上显示提示文字 ]
 tooltips_hotspots=&quot;false&quot;
  [ tooltips_mapspots 是否在地图热点上显示提示文字 是地图不是漫游场景 ]
 tooltips_mapspots=&quot;false&quot;
 deeplinking=&quot;false&quot;
 loadscene_flags=&quot;MERGE&quot;
 loadscene_blend=&quot;OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)&quot;
 loadscene_blend_prev=&quot;SLIDEBLEND(0.5, 180, 0.75, linear)&quot;
 loadscene_blend_next=&quot;SLIDEBLEND(0.5,   0, 0.75, linear)&quot;
 loadingtext=&quot;loading...&quot;
 layout_width=&quot;100%&quot;
 layout_maxwidth=&quot;814&quot;
 controlbar_width=&quot;-24&quot;
 controlbar_height=&quot;40&quot;
  [ controlbar_offset 控制整条导航栏的垂直位置，数字越小越往下 ]
 controlbar_offset=&quot;20&quot;
 controlbar_offset_closed=&quot;-40&quot;
 controlbar_overlap.no-fractionalscaling=&quot;10&quot;
 controlbar_overlap.fractionalscaling=&quot;0&quot;
 design_skin_images=&quot;vtourskin.png&quot;
 design_bgcolor=&quot;0x2D3E50&quot;
 design_bgalpha=&quot;0.8&quot;
 design_bgborder=&quot;0&quot;
 design_bgroundedge=&quot;1&quot;
 design_bgshadow=&quot;0 4 10 0x000000 0.3&quot;
 design_thumbborder_bgborder=&quot;3 0xFFFFFF 1.0&quot;
 design_thumbborder_padding=&quot;2&quot;
 design_thumbborder_bgroundedge=&quot;0&quot;
 design_text_css=&quot;color:#FFFFFF; font-family:Arial;&quot;
 design_text_shadow=&quot;1&quot;
 /&gt;


if(startscene === null OR !scene[get(startscene)],   copy(startscene,scene[0].name); );
loadscene(get(startscene), null, MERGE);
if(startactions !== null, startactions() );

[
  view    视图元素 在xml中可以用来设置启动视图设置
  hlookat    水平方向以球面坐标为单位 默认0.0 取值范围-180°至+180°
  vlookat    以度为单位的球面坐标单位 默认0.0 取值范围-90°至+90°
  fov    目前的视角度数 默认90.0 取值范围0.0至179.0
  fovmin    fov最小值 这将限制全景图放大
  fovmax    fov最大值 这将限制全景图缩小
  maxpixelzoom    观景图的最大像素缩放系数
]


[ preview    预览图片的url地址 ]


[
  image     定义全景图像
  type    类型
    CUBE    立方体全景图 - 六张图像
    CUBESTRIP    单一图像中的立体全景图 支持的立方体格式为6*1，1*6，3*2，2*3  立方体：L F R B U D  
    SPHERE    球形、等角全景图像 通过设置自定义hfov vfov和voffset可以进行局部全景图
    CYLINDER    圆柱形全景图像，  通过设置自定义hfov vfov和voffset可以进行局部全景图  
      未设置    自动检测类型（仅适用于多重影像） 
  multirs     启用平铺多分辨率图像的使用 当值true 表示image元素需要包含多个level元素
  tilesize    定义多重图像的平铺大小                                                 
]

button(可选)
是否展示显示和隐藏网格菜单的默认按钮
默认值=true
padding_top(可选)
缩略图滚动区域的顶部边距
对手机端该边距将被设置为0
默认值=75
padding_bottom(可选)
缩略图滚动区域的底部边距
对手机端该边距将被设置为0
默认值=75
width_margin(可选)
缩略图滚动区域的左右边距
对手机端该边距将被设置为0
默认值=0
grid_bgcolor(可选)
背景颜色
默认值=0x000000
grid_bgalpha(可选)
背景透明度
默认值=0.7
display_title(可选)
展示网格菜单标题
默认值=true
grid_title(可选)
网格菜单标题
默认值=GRID MENU
grid_title_css(可选)
网格菜单标题的CSS样式
默认值=color:#ffffff;font-family:Raleway;font-size:35px;
group(可选)
是否按照分组安排缩略图
注意不在分组中的场景不会被展示
默认值=false
current(可选)
只展示当前分组的缩略图
默认值=false
cat_container_height(可选)
分组标题容器的高度
默认值=35
cat_container_border(可选)
分组标题容器的边框设置
默认值=0,0,1,0 0xffffff 1.00
cat_container_title_css(可选)
分组标题的CSS样式
默认值=color:#ffffff;font-family:Raleway;font-size:25px;
cat_container_title_align(可选)
分组标题的对齐位置
默认值=left
cat_container_border_height(可选)
分组标题的底部边距
默认值=1
display_cat_desc(可选)
是否显示分组的描述
默认值=true
cat_desc_css(可选)
分组描述的CSS样式
默认值=color:#ffffff;font-family:Raleway;font-size:14px;text-align:left
thumbs_crop(可选)
缩略图的CROP属性
默认值=0|75|240|150
thumbs_width(可选)
缩略图的宽度
默认值=240
thumbs_height(可选)
缩略图的高度
默认值=150
thumbs_padding(可选)
缩略图的边距
默认值=25
thumbs_scale (可选)
按照百分比为单位的最大缩略图尺寸
默认值=100
active_thumb_border(可选)
激活的缩略图的边框设置
默认值=3 0xffffff 1.00
display_thumb_title(可选)
是否展示缩略图标题
默认值=true
thumb_title_align(可选)
缩略图标题的对齐方式
默认值=bottom
thumb_title_x(可选)
缩略图标题的X位置
默认值=0
thumb_title_y(可选)
缩略图标题的Y位置
默认值=5
thumb_title_css(可选)
缩略图标题的CSS样式
默认值=color:#ffffff;font-family:Raleway;font-size:16px;text-align:left;
thumb_title_roundedge(可选)
缩略图标题的背景圆角设置
默认值=5
thumb_title_background(可选)
缩略图标题背景是否显示
默认值=true
thumb_title_backgroundcolor(可选)
缩略图标题背景颜色
默认值=0x000000
thumb_title_backgroundalpha(可选)
缩略图标题背景透明度
默认值=0.8
thumb_title_border(可选)
缩略图标题背景边框是否显示
默认值=false
thumb_title_borderwidth(可选)
缩略图标题边框宽度
默认值=1
thumb_title_bordercolor(可选)
缩略图标题边框颜色
默认值=0xffffff
thumb_title_borderalpha(可选)
缩略图标题边框透明度
默认值=1
thumb_title_padding(可选)
缩略图标题边距
默认值=3 10
display_thumb_desc(可选)
是否在缩略图上显示场景描述
默认值=true
thumb_desc_css(可选)
场景描述的CSS样式
默认值=color:#ffffff;font-family:Raleway;font-size:15px;text-align:center
thumb_desc_bg_color(可选)
场景描述的背景颜色
默认值=0x000000
thumb_desc_bg_alpha(可选)
场景描述的背景透明度
默认值=0.6
thumb_desc_padding(可选)
场景描述的边距
默认值=8 15
loadscene_flags(可选)
Loadscene动作的flag参数
默认值=MERGE
loadscene_blend(可选)
Loadscene动作的blend参数
默认值=BLEND(1)
vcenter(可选)
网格菜单是否垂直居中
默认值=false</code></pre><h1><span id="events-chang-yong-shi-jian"><em><strong>events常用事件</strong></em></span><a href="#events-chang-yong-shi-jian" class="header-anchor">#</a></h1><pre><code>events 可调用各类型的事件，如载入过程中不同阶段触发的不同行为,设置事件的响应。
全局krpano事件:
一个不具有name属性的&lt;events&gt;元素定义的事件都是全局事件。通常只有一个全局事件。当有另一个&lt;events&gt;标签定义相同的事件时，之前定义的同一事件就会被覆写。
注意–当载入另一个xml文件或其他场景时，所有全局事件将保留，它们不会发生改变，除非在新的xml文件或场景中被再次定义。
&lt;events     name=&quot;&quot;
            keep=&quot;false&quot;
        onenterfullscreen=&quot;&quot;          进入全屏时执行
        onexitfullscreen=&quot;&quot;           退出全屏时执行
        onxmlcomplete=&quot;&quot;              XML文件加载完成时执行
        onpreviewcomplete=&quot;&quot;          预览图加载完成时执行
        onloadcomplete=&quot;&quot;             全景切片加载完毕时执行
        onnewpano=&quot;&quot;                  启动新的全景场景时执行
        onremovepano=&quot;&quot;               场景被移除时执行（加载新场景前）
        onnewscene=&quot;&quot;                 新场景加载完成时执行
        onloaderror=&quot;&quot;                加载错误时执行，执行被设置后，屏幕将不显示默认的错误信息
        onkeydown=&quot;&quot;                  键盘按下时执行
        onkeyup=&quot;&quot;                    键盘抬起时执行
        onclick=&quot;&quot;                    鼠标点击时执行
        onsingleclick=&quot;&quot;            单击
        ondoubleclick=&quot;&quot;             双击
        onmousedown=&quot;&quot;                当鼠标按下时执行
        onmouseup=&quot;&quot;                  当鼠标松开时执行
        onmousewheel=&quot;&quot;               当鼠标滚轮滚动时执行
        oncontextmenu=&quot;&quot;                  右键菜单
        onidle=&quot;&quot;                     无交互空闲时执行
        onviewchange=&quot;&quot;               场景视图改变时执行（渲染开始时）
        onviewchanged=&quot;&quot;              场景视图改变后执行（渲染完成时）
        onresize=&quot;&quot;                   全景尺寸改变时执行
        onautorotatestart=&quot;&quot;    自动旋转开始时执行
        onautorotatestop=&quot;&quot;    自动旋转停止时执行
        onautorotateoneround=&quot;&quot; 自动旋转一圈时执行
        onautorotatechange=&quot;&quot;  自动旋转状态改变时执行
        /&gt;
独立局部krpano事件:
一个具有name属性的&lt;events&gt;元素定义的事件都是独立事件。它可以包含所有类型的事件，但它们不会覆写全局事件，它们是另外进行调用的。这些被“命名”的&lt;events&gt;元素同样具有keep属性（默认值为false）。这意味着没有keep=”true”的&lt;events&gt;元素在新全景载入时将会被自动移除。
提示–命名的事件能够在不影响其他插件或xml代码的基础下在独立的插件和代码中发生作用。</code></pre><h1><span id="vtourskin-xml-pei-zhi-shuo-ming-wen-dang"><em><strong>vtourskin.xml配置说明文档</strong></em></span><a href="#vtourskin-xml-pei-zhi-shuo-ming-wen-dang" class="header-anchor">#</a></h1><pre><code>control
[ mouse    鼠标的控制模式     drag 拖动全景图片   moveto 移动全景图片 drag3d 自由轴3d拖动  ]
    [ touch    鼠标的控制模式     drag 拖动全景图片  moveto 移动全景图片 drag3d 自由轴3d拖动     ]
        touch=&quot;drag&quot;
        [ zoomtocursor    当通过鼠标滚轮启用和放大时，全景图将缩放到鼠标光标的位置 ]
        zoomtocursor=&quot;false&quot;
        [ zoomoutcursor    当通过鼠标滚轮缩小时，全景图将远离鼠标光标的位置，否则，全景图片将远离屏幕中央 ]
        zoomoutcursor=&quot;false&quot;
        [ draginertia    控制拖动的惯性，值越高，释放控制时视图旋转的动量越少 ]
        draginertia=&quot;0.1&quot;
        [ dragfriction   拖动控制模式的视图旋转动能的摩擦。值越低，移动越快停止  ]
        dragfriction=&quot;0.9&quot;
        [ movetoaccelerate    移动加速度 值越高 全景图片越快开始旋转 ]
        movetoaccelerate=&quot;1.0&quot;
        movetospeed=&quot;10.0&quot;
        [ movetofriction    移动控制模式的视图旋转动能的摩擦。值越低，移动越快停止]
        movetofriction=&quot;0.8&quot;
        [ keybaccelerate    键盘/按钮的加速控制移动 ]
        keybaccelerate=&quot;0.09&quot;
        [ keyfriction    键盘/鼠标的移动摩擦控制 ]
        keybfriction=&quot;0.94&quot;
        [ keybfovchange    鼠标滚轮缩放（以度为单位） ]
        keybfovchange=&quot;0.25&quot;
        mousefovchange=&quot;1.0&quot;
        [ fovspeed    最大fov变化/缩放速度（用于鼠标滚轮和键盘/按钮控制） ]
        fovspeed=&quot;3.0&quot;
        [ fovfriction    fov的摩擦变化 ]
        fovfriction=&quot;0.9&quot;
        [ bouncinglimits    击中平移或者缩放限制时弹回（仅限拖动控制） ]
        bouncinglimits=&quot;true&quot;
    /&gt;
cursors
[ standard   鼠标光标默认标准  ]
    [ dragging   鼠标光标拖动  ]
    dragging=&quot;move&quot;
    [ moving   鼠标光标移动  ]
    moving=&quot;move&quot;
/&gt;
layer/plugin    用于包括图像，徽标，按钮或者动态插件。组合，叠加，分层数。推荐使用layer
[ name    当前图层/插件元素的名称 ]
    [ keep    在加载新的全景图时，应该保留或删除此图层/插件元素 ]
    keep=&quot;true&quot;
    vr=&quot;true&quot; devices=&quot;mobile&quot;
    [ url    图层/插件图像文件的路径 支持的文件类型：JPG PNG GIF SWF格式 ]
    url=&quot;rotate_device.png&quot;
    [ scale    层/插件的缩放 ]
    scale=&quot;0.5&quot;
    [
        parent     将当前层/插件分配为另外一层/插件或者热点元素的子元素。
        STAGE    此父级允许将图层/插件OUTSIDE对齐到泉景区区域
        BGLAYER    这个父级允许对齐一个图层/插件的全景图
    ]
    parent=&quot;STAGE&quot;
    align=&quot;top&quot;
    edge=&quot;center&quot;
    y=&quot;28%&quot;

    [ alpha    图层/插件元素的透明度 0.0=完全透明 1.0=完全可见 ]
    alpha=&quot;0.0&quot;
    [ enabled    启用图层/插件元素来接受鼠标事件，当设置为&quot;false&quot;时，鼠标事件将被路由到底层元素 ]
    enabled=&quot;false&quot;
    [ bgcapture    在容器元素的背景上捕获鼠标事件 ]
bgcapture=&quot;false&quot;
/&gt;
    keep=&quot;true&quot;
    url=&quot;&quot;
    html5_url=&quot;%SWFPATH%/plugins/gyro2.js&quot;
    softstart=&quot;1.0&quot;
    enabled=&quot;false&quot;
    onavailable=&quot;skin_arrange_buttons();&quot;
    devices=&quot;html5&quot;
/&gt;
style    通过一个或者多个style元素加载属性样式（注：在样式中定义的属性不能覆盖插件）
    depth=&quot;800&quot;
    scale=&quot;0.5&quot;
    distorted=&quot;true&quot;
    ath=&quot;0&quot;
    atv=&quot;45&quot;
    alpha=&quot;0.5&quot;
    [ onclick    当图层/插件元素上鼠标单击时将会调用的操作/函数 ]
    onclick=&quot;skin_hotspotstyle_click();&quot;
    [ onover    当鼠标移动到图层/插件元素上时被调用的动作/函数 ]
    onover=&quot;tween(scale,0.55);&quot;
    [ onout    当鼠标移出layer元素时将被调用的动作/函数 ]
    onout=&quot;tween(scale,0.5);&quot;
    [ onloaded    当图层/插件图像的加载完成时被调用的动作/函数 ]
    onloaded=&quot;if(linkedscene AND skin_settings.tooltips_hotspots, copy(tooltip,scene[get(linkedscene)].title); loadstyle(skin_tooltips);)&quot;
/&gt;
event    krpano事件 - 用于在特定事件发生时调用动作或者函数
[ name    当定义一个name属性时，这个事件元素将是独立的本地事件元素  没有name属性设置了全局属性 ]

        keep=&quot;true&quot;
        [
            onxmlcomplete    当xml文件或者xml场景代码加载完成时，将会调用此事件
            在此事件之后，将开始用户控制全景观看和动态加载全景图片
        ]
        onxmlcomplete=&quot;set(events[skin_events].onxmlcomplete,null);
        skin_startup();&quot;
        [ onnewpano    当有新的全景图像，并且有关它的所有信息（type,imagesize,hfov,vfov）可用时，将调用此事件 ]
        onnewpano=&quot;skin_showloading(true);
        skin_update_scene_infos();
        skin_deeplinking_update_url();&quot;
        [ onremovepano    当目前的全景相片将被移除时 将会调用此事件 ]
        onremovepano=&quot;skin_showloading(true);&quot;
        [ onloadcomplete    当完成全景图像的加载时，将调用此事件
            当使用多分辨率图像时，当前视图的所有部分被完全加载时 改事件将被调用一次
        ]
        onloadcomplete=&quot;skin_showloading(false);&quot;
        onidle=&quot;skin_deeplinking_update_url();&quot;
        [
            onresize    
                当查看器的大小（或者区域大小）已更改时，调用此事件
                每次加载新的全景图时，onresize事件将被调用
                新的查看器大小将存储在stagewidth和stageheight变量中
                新区域大小将通过area.pixelwidth和area.pixelheight变量提供
        ]
        onresize=&quot;skin_onresize();&quot;
        [ onenterfullscreen    当切换到全屏模式时，将会调用此事件 ]
        onenterfullscreen.fullscreensupport=&quot;set(layer[skin_btn_fs].crop, &apos;64|576|64|64&apos;);&quot;
        [ onexitfullscreen    当从全屏切换成正常的窗口时，将会调用此事件 ]
        onexitfullscreen.fullscreensupport=&quot;set(layer[skin_btn_fs].crop, &apos;0|576|64|64&apos;);&quot;
        [
            onkeydown   当按下一个键时，将会调用此事件
                        按键的键码将存储在键码变量中
                        当按住键时，系统会自动发送重复的onkeydown事件。可以通过control.keydownrepeat设置选择性地禁用
        ]
    onkeydown=&quot;skin_keydown_event();&quot;
/&gt;
action  使用active元素可以定义krpano操作 类似于其他脚本或编程语言中的函数或过程
        有两种操作类型：    正常的krpano操作 - 适用于Flash和HTML5
                            javascript krpano操作 - 仅限HTML5

        正常的krpano操作

                    active(  ) : 操作2(  ):
                    ...

        javascript krpano操作      

hotspot     热点(热点是全景中的区域，可以在鼠标悬浮或点击时进行反应。可以用来加载其他全景图，链接到其他网址，更改观看)
            两种类型 ： 多边形热点    由一组点定义的区域
                        图像热点    由图像或Flash电影作为热点
                        如果设置了“URL”属性，就是图像热点。如果没有，并且有点 那么就是多边行热点
    [
        type    热点类型
                image ：   默认情况下 使用url文件作为图像
                text : 使用热点当做文本域
    ]
    type=&quot;image&quot;
    [ keep    是否在加载新的全景图片时保留此热点元素 ]
    keep=&quot;true&quot;
    [ enabled    是否启用热点元素接收鼠标事件 ]
    enabled=&quot;true&quot;
    [ handcursor   鼠标悬浮在热点元素上时显示手指  ]
    handcursor=&quot;true
    [ maskchildren    当设置为yrue时，所有在父级元素之外的子元素都将被屏蔽 ]
    maskchildren=&quot;true&quot;
    [
        zorder  热点元素的深层“Z”排列 重叠元素的设置
                这个值可以是任何字符串或者数字。所有带有zorder设置的热点元素将按给定值排序
                当没有设置时，顺序是未定义的，取决于浏览器的加载完成顺序
                zorder 应该是0-100之间的值，没有负值
    ]
    zorder=&quot;&quot;
    style=&quot;skin_base|webvr_menu_style&quot;
    [ ath atv    热点的球面坐标 以度为单位。热点图像将通过dage设定的点对齐 ]
    ath=&quot;0.0&quot;
    atv=&quot;0.0&quot;
    [ edge 热点元素的边缘/锚点  值有：lefttop left leftbottom top center bottom righttop right rightbottom ]
    edge=&quot;center&quot;
    [ zoom 缩放时 热点图像的大小与pano的大小发生变化 ]
    zoom=&quot;false&quot;
    [
       如果在三维空间中，热点图像与当前的phano/viewing被扭曲了。当扭曲的使用rx/ry/rz设置来旋转三维空间热点是
            一. 当启用时，将使用1000像素的大小作为像素大小的参考。这1000个像素覆盖了三维空间90度的视野
            二. 扭曲的热点不能也不应该有子元素。
            三. 显示Flash插件，因为失真的热点应该是可能的，但不是直接与他们交互。这种情况下。插件不会直接显示，只是一种屏幕截图的图像
            四. 在HTML5中，通过zorder对正常和扭曲的热点进行排序是不可能的，zorder2设置还可以作为正常热点使用，以将他们移动到扭曲的热点之上
    ]
    distorted=&quot;flase&quot;
    [ rx/ry/rz    在x/y/z轴上的三维旋转，只有在distorted是true时使用 ]
    rx=&quot;0.0&quot;
    ry=&quot;0.0&quot;
    rz=&quot;0.0&quot;
    [ width/height    热点图像的目标大小 热点图像将会缩放到这个大小 ]
    width=&quot;&quot;
    height=&quot;&quot;
    [ scale    热点元素的扩展 ]
    scale=&quot;&quot;
    [ rotate   热点元素的旋转度  ]
    rotate=&quot;0.0&quot;
    [ alpha   热点元素的透明度  ]
    alpha=&quot;1.0&quot;
    crop=&quot;0|64|64|64&quot;
    ox=&quot;-64&quot;
    onover=&quot;tween(scale,0.6);&quot;
    onout=&quot;tween(scale,0.5);&quot;
    onhover=&quot;&quot;
    ondown=&quot;&quot;
    onup=&quot;&quot;
    onloaded=&quot;&quot;
    vr_timeout=&quot;750&quot;
    onclick=&quot;skin_nextscene_loop(-1);&quot;
    [ visible    热点是否可见 ]
    visible=&quot;false&quot;
    devices=&quot;html5.and.webgl&quot;
/&gt;
network    网络设置
[ retrycount    在显示错误信息之前，自动下载重新加载服务器错误的次数 ]
memory    内存使用设置
[ maxmem    
    为MB解码的图像块设置最大内存使用量。当达到maxmem限制时，当前未使用（需要/可见）图快的内存将被返回
    当前默认设置为：
        Flash ： 350MB
        HTML5
                · 桌面 ： 150-400MB(取决于全屏尺寸)
                · 平板电脑/手机 ： 50MB
                · iOS : 40MB(7.1之前)
                · iOS : 50MB(7.1及以上)
                · iPhone 4/4s : 40MB
]</code></pre>]]></content>
      <categories>
        <category>VR</category>
      </categories>
      <tags>
        <tag>krpano</tag>
      </tags>
  </entry>
  <entry>
    <title>krpano 常用方法</title>
    <url>/2020/01/28/krpano-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>xml中使用</strong></em></p>
<pre><code>绑定js方法：js(js方法名(参数))

获取经纬度：get(view.hlookat),get(view.vlookat)

鼠标点击位置：get(mouse.x), get(mouse.y)

获取当前场景name：get(scene[get(xml.scene)].name)

获取当前场景索引：get(scene[get(xml.scene)].index)

获取缩放的值：get(view.fov)</code></pre><a id="more"></a>

<p><em><strong>js文件中可以krpano的方法</strong></em></p>
<pre><code>/*定义控件*/
var krpano = document.getElementById(&quot;krpanoSWFObject&quot;);

/*获取变量*/
var fov = Number(krpano.get(&quot;view.fov&quot;));
var hlookat = Number(krpano.get(&quot;view.hlookat&quot;));
var vlookat = Number(krpano.get(&quot;view.vlookat&quot;));

/*放大*/
fov -= 10.0;
krpano.set(&quot;view.fov&quot;, fov);

/*缩小*/
fov += 10.0;
krpano.set(&quot;view.fov&quot;, fov);

/*左旋转*/
hlookat += 10.0;
krpano.set(&quot;view.hlookat&quot;, hlookat);

/*右旋转*/
hlookat -= 10.0;
krpano.set(&quot;view.hlookat&quot;, hlookat);

/*上倾斜*/
vlookat -= 10.0;
krpano.set(&quot;view.vlookat&quot;, vlookat);

/*下倾斜*/
vlookat += 10.0;
krpano.set(&quot;view.vlookat&quot;, vlookat);

/*自动旋转*/
krpano.set(&quot;autorotate.enabled&quot;, true);

/*VR模式*/
krpano.call(&quot;WebVR.enterVR();&quot;);

/*全屏*/
krpano.set(&quot;fullscreen&quot;, true);

/*停止旋转*/
krpano.set(&quot;autorotate.enabled&quot;, false);

以上的方法如放大缩小是不带动画的，有卡顿的感觉。下面的方法利用setTimeout方法实现平滑过渡。

/*放大*/
krpano.set(&quot;fov_moveforce&quot;,-1);
setTimeout(&quot;krpano.set(&apos;fov_moveforce&apos;,0)&quot;,200);

/*缩小*/
krpano.set(&quot;fov_moveforce&quot;,1);
setTimeout(&quot;krpano.set(&apos;fov_moveforce&apos;,0)&quot;,200);

/*左旋转*/
krpano.set(&quot;hlookat_moveforce&quot;,-1);
setTimeout(&quot;krpano.set(&apos;hlookat_moveforce&apos;,0)&quot;,200);

/*右旋转*/
krpano.set(&quot;hlookat_moveforce&quot;,1);
setTimeout(&quot;krpano.set(&apos;hlookat_moveforce&apos;,0)&quot;,200);

/*上倾斜*/
krpano.set(&quot;vlookat_moveforce&quot;,-1);
setTimeout(&quot;krpano.set(&apos;vlookat_moveforce&apos;,0)&quot;,200);

/*下倾斜*/
krpano.set(&quot;vlookat_moveforce&quot;,1);
setTimeout(&quot;krpano.set(&apos;vlookat_moveforce&apos;,0)&quot;,200);</code></pre>]]></content>
      <categories>
        <category>VR</category>
      </categories>
      <tags>
        <tag>krpano</tag>
      </tags>
  </entry>
  <entry>
    <title>vue js转ts文档 cl2.0</title>
    <url>/2020/01/28/vue-js%E8%BD%ACts%E6%96%87%E6%A1%A3-cl2-0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong><em>第一步</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-transform-decorators-legacy --save-dev</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p><em><strong>第二步</strong></em><br><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-1.png" alt title="vue js组件转ts"></p>
<p><strong><em>第三步</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save-dev typescript npm install --save-dev ts-loader</span><br></pre></td></tr></table></figure>

<p><em><strong>第四步</strong></em><br><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-3.png" alt title="vue js组件转ts"></p>
<p><em><strong>第五步</strong></em></p>
<p><code>最后把 .ts 后缀添加上就OK了，在webpack.base.conf.js文件下</code></p>
<p><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-6.png" alt title="vue js组件转ts"></p>
<p><strong><em>第六步</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save vue-class-component</span><br></pre></td></tr></table></figure>

<p><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-7.png" alt title="vue js组件转ts"></p>
<p><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-8.png" alt title="vue js组件转ts"></p>
<p><img src="/images/vue-js-ts/%E5%9B%BE%E7%89%87-9.png" alt title="vue js组件转ts"></p>
<p><em><strong>第七步</strong></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install @types&#x2F;node --save-dev</span><br></pre></td></tr></table></figure>

<p><em><strong>第八步</strong></em></p>
<p><code>这个文件放在根目录</code>  <a href="https://github.com/blackKr/source/blob/master/tsconfig.json">tsconfig.json</a></p>
<p><em><strong>第九步</strong></em></p>
<p><code>这个文件放在src下</code>  <a href="https://github.com/blackKr/source/blob/master/vue-shims.d.ts">vue-shims.d.ts</a></p>
<p><em><strong>第十步</strong></em></p>
<p><code>将主入口的js文件改成ts文件</code></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>uniapp兼容问题</title>
    <url>/2020/01/27/uniapp%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://uniapp.dcloud.io/"><img src="/images/uniapp-logo.png" alt="作者头像"></a></p>
<a id="more"></a>

<h1><span id="zu-jian-jian-rong-xie-fa-wen-ti"><em>组件兼容写法问题</em></span><a href="#zu-jian-jian-rong-xie-fa-wen-ti" class="header-anchor">#</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.全局的page：再支付宝小程序上打包后页面的最外层没有page组件，所以再设置页面高度</span><br><span class="line">  为100%时并不是手机屏幕的高度，而是元素的高度，其他程序正常;</span><br><span class="line">  </span><br><span class="line">2.scroll-view组件再设置竖向滚动时，在百度小程序上使用触底加载只会执行一次，使用</span><br><span class="line">  page方法来实现此效果;</span><br><span class="line">  </span><br><span class="line">3.使用遮罩层在百度小程序上一定要加page的背景色，否则页面样式会穿透;</span><br><span class="line"></span><br><span class="line">4.公共的组件写在components中，注意：公共组件的周期采用的是vue的周期，pages下面</span><br><span class="line">  的页面周期采用的是小程序的生命周期方式开发;</span><br><span class="line">  </span><br><span class="line">5.阻止事件冒泡可以使用vue的方式等：@click.stop&#x3D;事件名称;</span><br><span class="line"></span><br><span class="line">6.事件绑定：即便使用条件编译组件也不支持小程序的catch和bind，都要使用@去绑定;</span><br><span class="line"></span><br><span class="line">7.App.vue：相当于小程序的app.js，是程序的主入口;</span><br><span class="line"></span><br><span class="line">8.form：在小程序上button绑定的data-只有再小程序上才可以获取到;</span><br><span class="line"></span><br><span class="line">9.Map：controltap 控件点击事件不执行，验证了微信小程序也不执行，微信这个事件</span><br><span class="line">  出现了问题;</span><br></pre></td></tr></table></figure>


<h1><span id="jie-kou-jian-rong-wen-ti"><em>接口兼容问题</em></span><a href="#jie-kou-jian-rong-wen-ti" class="header-anchor">#</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.获取系统信息的接口再百度小程序上会慢一些，建议设置一个延时获取，同时做好空</span><br><span class="line">  的return;</span><br><span class="line">	</span><br><span class="line">2.页面使用触底加载更多建议再底部增加一个空的view，例如：30upx的view，这样触</span><br><span class="line">  底加载更多会更灵敏一些，否则再百度和支付宝小程序上触底不灵敏;</span><br></pre></td></tr></table></figure>


<h1><span id="zhu-yao-luo-ji"><em>主要逻辑</em></span><a href="#zhu-yao-luo-ji" class="header-anchor">#</a></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.定位：每次程序从后台到前台都会更新当前定位信息;</span><br><span class="line"></span><br><span class="line">2.网络请求：接口和api统一封装在net下，文件的名字是该接口功能的概要，再net下只</span><br><span class="line">  需要继承初始化的父类然后去实现对应的接口名和域名即可（由于项目中有很多域名所</span><br><span class="line">  以没办法采用一个，只能去单独配置每个接口所需的域名）;</span><br><span class="line">	</span><br><span class="line">3.Model：数据会储存在model中，父类会实现基本的setModel和getModel方法，在子类</span><br><span class="line">  只需要去实现对应的Model的key以及是否需要存入内存中，会先显示model的数据同时</span><br><span class="line">  去请求net更新model（之所以会把key写在model是为了避免时间久了key的乱用导致项</span><br><span class="line">  目的缓存混乱）;</span><br><span class="line"></span><br><span class="line">4.分包：分包的写法和微信小程序是一致的，当前版本只有微信小程序支持分包;</span><br><span class="line"></span><br><span class="line">5.公共css引入：公共的通用css可以在App.vue中引入;</span><br><span class="line"></span><br><span class="line">6.通知：程序中主要使用了发送通知、注册通知、反注册通知的逻辑，例如：筛选功能，</span><br><span class="line">  点击后只会发送对应的通知然后相关的页面去监听对应的通知去做出相应的变化，而不</span><br><span class="line">  是直接去调用，做到模块之间的彻底分离;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>uniapp</tag>
      </tags>
  </entry>
  <entry>
    <title>命令工具</title>
    <url>/2020/01/27/%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1><span id="hexo-cao-zuo-zhi-nan">hexo操作指南</span><a href="#hexo-cao-zuo-zhi-nan" class="header-anchor">#</a></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">""</span>   创建文件</span><br><span class="line">hexo clean    先清除（避免之前的主题和public混在一起）</span><br><span class="line">hexo g        生成静态页面</span><br><span class="line">hexo s        启动本地服务器进行查看</span><br><span class="line">hexo d        查看后没有问题即可部署到github上</span><br></pre></td></tr></table></figure>
<a id="more"></a>



<h1><span id="cygwin">cygwin</span><a href="#cygwin" class="header-anchor">#</a></h1><p><strong>1.增加文件</strong><br>touch 文件名</p>
<p><strong>2.删除文件</strong><br>rm file_name<br>rmdir file_name<br>rm -fr file_name</p>
<p><strong>3.增加文件名</strong><br>mkdir 文件名</p>
<p><code>4.使用webstorm 编写 需要将右下角设置成 适应于windows的编写</code></p>
<p><code>5.使用命令行编写 vi 文件位置 —&gt; :wq! 保存并退出编写模式</code></p>
<p><code>6.命令行操作 Backspace 跳出编写模式 i在光标前插入 a在光标后插入</code></p>
<p><strong>7.check history command</strong><br>history</p>
<p><strong>8.cd command</strong><br>1.cd          命令返回到默认路径<br>2.cd -        切换到刚才的路径</p>
<p><strong>9.当前文件</strong><br>.</p>
<p><strong>10.cp command</strong><br>cp -av file_name new_file_name<br>将整个目录复制，两目录完全一样</p>
<p>cp -fr file_name new_file<br>将整个目录复制，并且是以非链接方式复制，当source目录带有符号链接时，两个目录不相同</p>
<p><strong>11.change name</strong><br>mv old_name new_name</p>
<h1><span id="shell">shell</span><a href="#shell" class="header-anchor">#</a></h1><pre><code>1.使用webstorm 编写 需要将右下角设置成 适应于windows的编写；
2.使用命令行编写 vi 文件位置 —&gt; :wq! 保存并退出编写模式；
3.命令行操作 Backspace 跳出编写模式 i在光标前插入 a在光标后插入  
  h j k l 操作光标移动  x 删除  dd 删除一行
4.增加权限：    
  chmod 777 ./config.sh</code></pre><h1><span id="vim">vim</span><a href="#vim" class="header-anchor">#</a></h1><pre><code>  1.打开文件：
      vim file_name

2.在vim中打开一个新文件：
      :open file_name

3.在新窗口中打开文件:
      :split file_name

4.查看当前打开的文件列表，当前正在编辑的文件会用[]括起来:
      :args

5.打开远程文件，比如ftp或者share folder：
      :e ftp://192.168.10.76/abc.txt
      :e \\qadrive\test\1.txt

6.插入命令：
    i 在当前位置生前插入
      I 在当前行首插入
      a 在当前位置后插入
      A 在当前行尾插入
      o 在当前行之后插入一行
      O 在当前行之前插入一行

7.查找命令：
      /text　　查找text，按n健查找下一个，按N健查找前一个。
      ?text　　查找text，反向查找，按n健查找下一个，按N健查找前一个。
      vim中有一些特殊字符在查找时需要转义　　.*[]^%/?~$
      :set ignorecase　　忽略大小写的查找
      :set noignorecase　　不忽略大小写的查找
      查找很长的词，如果一个词很长，键入麻烦，可以将光标移动到该词上，按*或#键即可以该单词进行搜索，相当于/搜索。而#命令相当于?搜索。
      :set hlsearch　　高亮搜索结果，所有结果都高亮显示，而不是只显示一个匹配。
      :set nohlsearch　　关闭高亮搜索显示
      :nohlsearch　　关闭当前的高亮显示，如果再次搜索或者按下n或N键，则会再次高亮。
      :set incsearch　　逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成。
      :set wrapscan　　重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启。

8.替换命令：
      ra 将当前字符替换为a，当期字符即光标所在字符。
      s/old/new/ 用old替换new，替换当前行的第一个匹配
      s/old/new/g 用old替换new，替换当前行的所有匹配
      %s/old/new/ 用old替换new，替换所有行的第一个匹配
      %s/old/new/g 用old替换new，替换整个文件的所有匹配
      :10,20 s/^/    /g 在第10行知第20行每行前面加四个空格，用于缩进。
      ddp 交换光标所在行和其下紧邻的一行。

9.移动命令：
      h 左移一个字符
      l 右移一个字符，这个命令很少用，一般用w代替。
      k 上移一个字符
      j 下移一个字符
      以上四个命令可以配合数字使用，比如20j就是向下移动20行，5h就是向左移动5个字符，在Vim中，很多命令都可以配合数字使用，比如删除10个字符10x，在当前位置后插入3个！，3a！&lt;Esc&gt;，这里的Esc是必须的，否则命令不生效。
      w 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首。此命令快，可以代替l命令。
      b 向后移动一个单词 2b 向后移动2个单词
      e，同w，只不过是光标停在单词尾部
      ge，同b，光标停在单词尾部。
      ^ 移动到本行第一个非空白字符上。
      0（数字0）移动到本行第一个字符上，
      &lt;HOME&gt; 移动到本行第一个字符。同0健。
      $ 移动到行尾 3$ 移动到下面3行的行尾
      gg 移动到文件头。 = [[
      G（shift + g） 移动到文件尾。 = ]]
      f（find）命令也可以用于移动，fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。
      F 同f，反向查找。
      跳到指定行，冒号+行号，回车，比如跳到240行就是 :240回车。另一个方法是行号+G，比如230G跳到230行。
      Ctrl + e 向下滚动一行
      Ctrl + y 向上滚动一行
      Ctrl + d 向下滚动半屏
      Ctrl + u 向上滚动半屏
      Ctrl + f 向下滚动一屏
      Ctrl + b 向上滚动一屏

10.撤销和重做：
      u 撤销（Undo）
      U 撤销对整行的操作
      Ctrl + r 重做（Redo），即撤销的撤销。

11.删除命令：
      x 删除当前字符
      3x 删除当前光标开始向后三个字符
      X 删除当前字符的前一个字符。X=dh
      dl 删除当前字符， dl=x
      dh 删除前一个字符
      dd 删除当前行
      dj 删除上一行
      dk 删除下一行
      10d 删除当前行开始的10行。
      D 删除当前字符至行尾。D=d$
      d$ 删除当前字符之后的所有字符（本行）
      kdgg 删除当前行之前所有行（不包括当前行）
      jdG（jd shift + g）   删除当前行之后所有行（不包括当前行）
      :1,10d 删除1-10行
      :11,$d 删除11行及以后所有的行
      :1,$d 删除所有行
      J(shift + j)　　删除两行之间的空行，实际上是合并两行。

12.拷贝和粘贴：
      yy 拷贝当前行
      nyy 拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。
      p  在当前光标后粘贴,如果之前使用了yy命令来复制一行，那么就在当前行的下一行粘贴。
      shift+p 在当前行前粘贴
      :1,10 co 20 将1-10行插入到第20行之后。
      :1,$ co $ 将整个文件复制一份并添加到文件尾部。
      正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按y即可复制
      ddp交换当前行和其下一行
      xp交换当前字符和其后一个字符

13.剪切命令：
      正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按d即可剪切
      ndd 剪切当前行之后的n行。利用p命令可以对剪切的内容进行粘贴
      :1,10d 将1-10行剪切。利用p命令可将剪切后的内容进行粘贴。
      :1, 10 m 20 将第1-10行移动到第20行之后。

14.退出命令：
      :wq 保存并退出
      ZZ 保存并退出
      :q! 强制退出并忽略所有更改
      :e! 放弃所有修改，并打开原来文件。
       15.窗口命令：
      :split或new 打开一个新窗口，光标停在顶层的窗口上
      :split file或:new file 用新窗口打开文件
      split打开的窗口都是横向的，使用vsplit可以纵向打开窗口。
      Ctrl+ww 移动到下一个窗口
      Ctrl+wj 移动到下方的窗口
      Ctrl+wk 移动到上方的窗口

  15.关闭窗口
      :close 最后一个窗口不能使用此命令，可以防止意外退出vim。
      :q 如果是最后一个被关闭的窗口，那么将退出vim。
      ZZ 保存并退出。

      关闭所有窗口，只保留当前窗口
      :only

      录制宏
      按q键加任意字母开始录制，再按q键结束录制（这意味着vim中的宏不可嵌套），使用的时候@加宏名，比如qa。。。q录制名为a的宏，@a使用这个宏。

16.执行shell命令：
      :!command
      :!ls 列出当前目录下文件
      :!perl -c script.pl 检查perl脚本语法，可以不用退出vim，非常方便。
      :!perl script.pl 执行perl脚本，可以不用退出vim，非常方便。
      :suspend或Ctr - Z 挂起vim，回到shell，按fg可以返回vim。

17.注释命令：
      perl程序中#开始的行为注释，所以要注释某些行，只需在行首加入#
      3,5 s/^/#/g 注释第3-5行
      3,5 s/^#//g 解除3-5行的注释
      1,$ s/^/#/g 注释整个文档。
      :%s/^/#/g 注释整个文档，此法更快。

18.帮助命令：
      :help or F1 显示整个帮助
      :help xxx 显示xxx的帮助，比如 :help i, :help CTRL-[（即Ctrl+[的帮助）。
      :help &apos;number&apos; Vim选项的帮助用单引号括起
      :help &lt;Esc&gt; 特殊键的帮助用&lt;&gt;扩起
      :help -t Vim启动参数的帮助用-
      ：help i_&lt;Esc&gt; 插入模式下Esc的帮助，某个模式下的帮助用模式_主题的模式
      帮助文件中位于||之间的内容是超链接，可以用Ctrl+]进入链接，Ctrl+o（Ctrl + t）返回

  19.其他非编辑命令：
      . 重复前一次命令
      :set ruler?　　查看是否设置了ruler，在.vimrc中，使用set命令设制的选项都可以通过这个命令查看
      :scriptnames　　查看vim脚本文件的位置，比如.vimrc文件，语法文件及plugin等。
      :set list 显示非打印字符，如tab，空格，行尾等。如果tab无法显示，请确定用set lcs=tab:&gt;-命令设置了.vimrc文件，并确保你的文件中的确有tab，如果开启了expendtab，那么tab将被扩展为空格。

      在Windows系统上
      :help tutor
      :syntax 列出已经定义的语法项
      :syntax clear 清除已定义的语法规则
      :syntax case match 大小写敏感，int和Int将视为不同的语法元素
      :syntax case ignore 大小写无关，int和Int将视为相同的语法元素，并使用同样的配色方案</code></pre>]]></content>
      <categories>
        <category>命令</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>cygwin</tag>
        <tag>shell</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>js常见问题</title>
    <url>/2020/01/27/js%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3><span id="break-he-continue">break 和 continue</span><a href="#break-he-continue" class="header-anchor">#</a></h3><p>break 语句可以立即退出循环，阻止再次反复执行任何代码。</p>
<p>continue 语句只是退出当前循环，根据控制表达式还允许继续进行下一次循环</p>
<p>与有标签的语句一起使用:<br>  break 语句和 continue 语句都可以与有标签的语句联合使用，返回代码中的特定位置。</p>
<a id="more"></a>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> iNum = <span class="number">0</span>;</span><br><span class="line">outermost:</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;<span class="number">10</span>; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span> &amp;&amp; j == <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span> outermost;</span><br><span class="line">    &#125;</span><br><span class="line">            </span><br><span class="line">    iNum++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">alert(iNum); <span class="comment">//输出 "55"</span></span><br></pre></td></tr></table></figure>

<h3><span id="arguments-dui-xiang">arguments 对象</span><a href="#arguments-dui-xiang" class="header-anchor">#</a></h3><p>在函数代码中，使用特殊对象 arguments，无需明确指出参数名访问    </p>
<p>1.检测参数个数<br>      arguments.length</p>
<p>2.模拟函数重载</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doAdd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">arguments</span>.length == <span class="number">1</span>) &#123;</span><br><span class="line">    alert(<span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="number">5</span>);</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length == <span class="number">2</span>) &#123;</span><br><span class="line">    alert(<span class="built_in">arguments</span>[<span class="number">0</span>] + <span class="built_in">arguments</span>[<span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">	 </span><br><span class="line">doAdd(<span class="number">10</span>);<span class="comment">//输出 "15"</span></span><br><span class="line">doAdd(<span class="number">40</span>, <span class="number">20</span>);<span class="comment">//输出 "60"</span></span><br></pre></td></tr></table></figure>

<p>3.Function 对象<br>1.length 属性<br>函数属于引用类型，所以也有属性和方法<br>ECMAScript 可以接受任意多个参数（最多 25 个）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doAdd</span>(<span class="params">iNum</span>) </span>&#123;</span><br><span class="line">  alert(iNum + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"Hi"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(doAdd.length);<span class="comment">//输出 "1"</span></span><br><span class="line">alert(sayHi.length);<span class="comment">//输出 "0"</span></span><br></pre></td></tr></table></figure>

<h3><span id="function-dui-xiang-de-fang-fa">Function 对象的方法</span><a href="#function-dui-xiang-de-fang-fa" class="header-anchor">#</a></h3><p>Function 对象也有与所有对象共享的 valueOf() 方法和 toString() 方法。这两个方法返回的都是函数的源代码，在调试时尤其有用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doAdd</span>(<span class="params">iNum</span>) </span>&#123;</span><br><span class="line">	alert(iNum + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(doAdd.toString());	</span><br><span class="line"><span class="comment">// 输出 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doAdd</span>(<span class="params">iNum</span>) </span>&#123;</span><br><span class="line">	alert(iNum + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="js-dui-xiang">js对象</span><a href="#js-dui-xiang" class="header-anchor">#</a></h3><p>1.对象废除<br>    var oObject = new Object;<br>    // do something with the object here<br>    oObject = null;<br>    注意：废除对象的所有引用时要当心。如果一个对象有两个或更多引用，则要正确废除该对象，必须将其所有引用都设置为 null。<br>    每用完一个对象后，就将其废除，来释放内存，这是个好习惯。这样还确保不再使用已经不能访问的对象，从而防止程序设计错误的出现。</p>
<p>2.String 对象<br>    1).new String()  method: toString() , valueOf() , split() // 切分成数组<br>    2).查找某字符是否存在method:<br>      1.indexOf() , lastIndexOf()  如果没有找不到子串，则返回 -1 , 否则返回具体的位置。<br>      2.localeCompare()  判断字符串位置 （ 使用时判断是否大于、等于、小于 0 ）<br>    var oStringObject = new String(“yellow”);<br>    alert(oStringObject.localeCompare(“brick”));        //输出 “1”   字符串之后<br>    alert(oStringObject.localeCompare(“yellow”));        //输出 “0”   等于<br>    alert(oStringObject.localeCompare(“zoo”));        //输出 “-1”  字符串之前</p>
<p>3.slice() 和 substring()<br>    var oStringObject = new String(“hello world”);<br>    alert(oStringObject.slice(“3”));        //输出 “lo world”<br>    alert(oStringObject.substring(“3”));        //输出 “lo world”<br>    alert(oStringObject.slice(“3”, “7”));        //输出 “lo w”<br>    alert(oStringObject.substring(“3”, “7”));    //输出 “lo w”<br>  对于负数参数，slice() 方法会用字符串的长度加上参数，substring() 方法则将其作为 0 处理（也就是说将忽略它）。</p>
<p>4.判断类型  instanceof , typeOf<br>    var oStringObject = new String(“hello world”);<br>    alert(oStringObject instanceof String);    //输出 “true</p>
<p>5.Array 对象<br>    1).方法：<br>    concat()       // 连接两个或更多的数组，并返回结果。<br>    join()         // 把数组的所有元素放入一个字符串。元素通过指定的分隔符进行分隔。<br>    push()         // 末尾添加新元素<br>    unshift()      // 开头增加新元素<br>    shift()        // 删除并返回数组的第一个元素<br>    pop()          // 删除并返回数组的最后一个元素<br>    slice()        // 从某个已有的数组返回选定的元素<br>    splice()       // 删除元素，并向数组添加新元素。<br>    sort()         // 对数组的元素进行排序<br>    reverse()      //     颠倒数组中元素的顺序。</p>
<p>6.boolean false的情况（false，0，“”，null，undefined和NaN ）</p>
<h3><span id="zuo-yong-yu">作用域</span><a href="#zuo-yong-yu" class="header-anchor">#</a></h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var 作用域是 上层函数体(函数及作用域）</span></span><br><span class="line"><span class="comment">// let 作用域是 自身函数体（块及作用域)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"i="</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; ++j) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"j="</span> + j);</span><br><span class="line">  &#125;, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> m = <span class="number">0</span>; m &lt; <span class="number">5</span>; ++m) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"m="</span> + n);</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">  &#125;)(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> m = <span class="number">0</span>; m &lt; <span class="number">5</span>; ++m) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"m="</span> + m);</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">  &#125;)(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; ++k) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"k="</span> + k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> l = <span class="number">0</span>; l &lt; <span class="number">5</span>; ++l) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"l="</span> + l);</span><br><span class="line">  &#125;, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>svn使用技巧</title>
    <url>/2020/01/27/svn%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3><span id="hui-fu">恢复</span><a href="#hui-fu" class="header-anchor">#</a></h3><p>1.恢复一整个目录的文件<br>  svn revert -R .  （ . 代表当前 ）<br>2.丢弃对一个文件的修改：<br>    svn revert foo.c</p>
<a id="more"></a>

<h3><span id="la-fen-zhi">拉分支</span><a href="#la-fen-zhi" class="header-anchor">#</a></h3><p>svn cp -r 需要拉到的版本号 -m “pull ios_5.0.0_10969_20171206” svn://116.62.100.209/panda/trunk/client/文件名  svn://116.62.100.209/panda/branches/release/文件名_版本_版本号_时间（例：ios_5.0.0_10969_20171206）</p>
<h3><span id="he-bing-ban-ben-xu-cd-dao-dang-qian-fen-zhi">合并版本(需 cd 到 当前分支)</span><a href="#he-bing-ban-ben-xu-cd-dao-dang-qian-fen-zhi" class="header-anchor">#</a></h3><p>svn merge -c 需要合并的版本号 svn://116.62.100.209/panda/trunk/client/文件名 .   （ . 代表 当前路径 ）<br>提交：merge from 版本号 trunk</p>
<p>反向合并：svn merge -c -需要合并的版本号 svn://116.62.100.209/panda/trunk/client/文件名 .   （ . 代表 当前路径 ）</p>
<h3><span id="jie-jue-he-bing-hou-de-chong-tu">解决合并后的冲突</span><a href="#jie-jue-he-bing-hou-de-chong-tu" class="header-anchor">#</a></h3><p>svn resolved path  （ 已过时 ）<br>svn resolved –accept mine-full path （ 1.5版本后，加上–accept参数，尝试自动处理冲突 ）</p>
<h3><span id="tian-jia-wen-jian">添加文件</span><a href="#tian-jia-wen-jian" class="header-anchor">#</a></h3><p>svn add 文件名称<br>svn add *.js   （添加所有 .js 文件）</p>
<h3><span id="ti-jiao-dai-ma">提交代码</span><a href="#ti-jiao-dai-ma" class="header-anchor">#</a></h3><p>svn ci -m’注释信息’ path<br>svn ci -m’注释信息’   ( 提交所有改动的代码 ) ( 可以不写注释 )</p>
<h3><span id="geng-xin-dao-zhi-ding-ban-ben">更新到指定版本</span><a href="#geng-xin-dao-zhi-ding-ban-ben" class="header-anchor">#</a></h3><p>svn up -r 版本号 path （ 将指定文件还原到指定的版本号 ）</p>
<h3><span id="cha-kan-wen-jian-huo-zhe-mu-lu-zhuang-tai">查看文件或者目录状态</span><a href="#cha-kan-wen-jian-huo-zhe-mu-lu-zhuang-tai" class="header-anchor">#</a></h3><p>svn st -v path  （ 查看文件或者目录状态 最后 ）</p>
<h3><span id="shan-chu-wen-jian">删除文件</span><a href="#shan-chu-wen-jian" class="header-anchor">#</a></h3><p>svn rm -m’注释’ path</p>
<h3><span id="cha-kan-ri-zhi">查看日志</span><a href="#cha-kan-ri-zhi" class="header-anchor">#</a></h3><p>svn log path</p>
<h3><span id="cha-kan-wen-jian-xiang-xi-xin-xi">查看文件详细信息</span><a href="#cha-kan-wen-jian-xiang-xi-xin-xi" class="header-anchor">#</a></h3><p>svn info path </p>
<h3><span id="bi-jiao-chai-yi">比较差异</span><a href="#bi-jiao-chai-yi" class="header-anchor">#</a></h3><p>svn diff -r m:n path ( 比较 指定文件夹 m 和 n 版本的差异 )</p>
<h3><span id="cha-kan-wen-jian-nei-rong">查看文件内容</span><a href="#cha-kan-wen-jian-nei-rong" class="header-anchor">#</a></h3><p>cat path</p>
<h3><span id="xiu-gai-wen-jian-nei-rong">修改文件内容</span><a href="#xiu-gai-wen-jian-nei-rong" class="header-anchor">#</a></h3><p>vi path</p>
<h3><span id="geng-gai-wen-jian-ming-cheng">更改文件名称</span><a href="#geng-gai-wen-jian-ming-cheng" class="header-anchor">#</a></h3><p>svn move old_path_name new_path_name</p>
<h3><span id="chang-jian-zhuang-tai">常见状态</span><a href="#chang-jian-zhuang-tai" class="header-anchor">#</a></h3><font color="#ff5400">

<pre><code>&quot;&quot;  没有修改

&apos;A&apos;  新增  

&apos;D&apos;  删除

&apos;M&apos;  修改

&apos;R&apos;  替代

&apos;C&apos;  冲突  

&apos;I&apos;  忽略

&apos;?&apos;  未受控

&apos;!&apos;  丢失，一般是将受控文件直接删除导致</code></pre></font>


<h3><span id="she-zhi-hu-lue-wen-jian">设置忽略文件</span><a href="#she-zhi-hu-lue-wen-jian" class="header-anchor">#</a></h3><p>export SVN_EDITOR=vim<br>svn propedit svn:ignore 需要设置忽略的文件/文件夹   此时在vim中 输入需要忽略的文件夹名称即可</p>
<h3><span id="cha-kan-zui-jin-ji-tiao-ri-zhi">查看最近几条日志</span><a href="#cha-kan-zui-jin-ji-tiao-ri-zhi" class="header-anchor">#</a></h3><p>svn log -l 10     (查看最近10条日志 l 是小写的 L)</p>
]]></content>
      <categories>
        <category>命令</category>
      </categories>
      <tags>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 操作指南</title>
    <url>/2019/12/20/hexo%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<a id="more"></a>

<h2><span id="quick-start">Quick Start</span><a href="#quick-start" class="header-anchor">#</a></h2><h3><span id="create-a-new-post">Create a new post</span><a href="#create-a-new-post" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3><span id="run-server">Run server</span><a href="#run-server" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server   简写:   hexo s</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3><span id="generate-static-files">Generate static files</span><a href="#generate-static-files" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate   简写:   hexo g</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3><span id="deploy-to-remote-sites">Deploy to remote sites</span><a href="#deploy-to-remote-sites" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy   简写:   hexo d</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>命令</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
